---
title: "Introdução ao R para Ecólogos"
subtitle: "⚔<br/>Transformação e Visualização de Dados"
author: "Vitor Borges"
institute: "PPGBIO-UNIRIO"
date: "2021/06/24"
output:
  xaringan::moon_reader:
    seal: false
    lib_dir: libs
    nature:
      slideNumberFormat: ""
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
---

layout: true
name: basic
background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true")
background-position: 0% 100%
background-size: 20%
class: inverse

```{r setup, include=FALSE}
library(tidyverse)
library(kableExtra)
source("IRE_functions.R")
options(htmltools.dir.version = FALSE)
xaringanExtra::use_xaringan_extra()
xaringanExtra::use_clipboard()
tadpoles_raw <- read_csv(file = "/home/cla/Documentos/Vitor/Laboratórios/UNIRIO/Disciplinas/Introdução-ao-R-para-Ecólogos/IRE-21/Dados/tadpoles_raw.csv", 
                             col_names = TRUE, 
                             na = c("NA"))
streams_raw <- readxl::read_xlsx("/home/cla/Documentos/Vitor/Laboratórios/UNIRIO/Disciplinas/Introdução-ao-R-para-Ecólogos/IRE-21/Dados/streams.xlsx")
streams_variables <- read_csv("/home/cla/Documentos/Vitor/Laboratórios/UNIRIO/Disciplinas/Introdução-ao-R-para-Ecólogos/IRE-21/Dados/streams_variables.csv",
                               col_types = cols(
                                 stream = col_factor()
                               ))
streams_date_variables <- read_csv("/home/cla/Documentos/Vitor/Laboratórios/UNIRIO/Disciplinas/Introdução-ao-R-para-Ecólogos/IRE-21/Dados/streams_date_variables.csv",
                               col_types = cols(
                                 stream = col_factor()
                               ))
tadpoles_clean <- read_tadpoles_raw("/home/cla/Documentos/Vitor/Laboratórios/UNIRIO/Disciplinas/Introdução-ao-R-para-Ecólogos/IRE-21/Dados/tadpoles_raw.csv")
tadpoles_freq_stream <- tadpoles_clean %>% 
  group_by(stream, species) %>% 
  summarise(n = n()) %>% 
  mutate(freq_rel = round(n/sum(n), 3)) %>% 
  drop_na() 
tadpoles_freq_date_stream <- tadpoles_clean %>% 
  group_by(date = zoo::as.yearmon(date), stream, species) %>% 
  summarise(n = n()) %>% 
  mutate(freq_rel = round(n/sum(n), 3)) %>% 
  drop_na() 
tadpoles_rich_stream <- tadpoles_freq_stream %>% 
  count(stream, name = "n_sp")
tadpoles_rich_date_stream <- tadpoles_freq_date_stream %>%
  group_by(date) %>% 
  count(stream, name = "n_sp")
tadpoles_len_sp <- tadpoles_clean %>% 
  select(date, species, stage, body_len, total_len) %>% 
  mutate(date = zoo::as.yearmon(date),
         ratio = body_len/total_len)
```

---
name: Title
background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true")
background-position: 0% 100%
background-size: 20%
class: inverse, center, middle, title-slide

# .blue[**Introdução ao R para Ecólogos**]

## .blue[**⚔<br/>Transformação e Visualização de Dados**]

### .blue[Vitor Borges-Júnior]

### .blue[PPGBIO - UNIRIO]

### .blue[2021/07/06]

???
IDEIAS DE MELHORIAS PARA O PRÓXIMO CURSO

- Melhorar as ilustrações dos slides.
- Substituir as figuras que representam os verbos por exemplos reais de transformação na própria tabela de dados utilizada para os exemplos da aula.
- Condensar o conteúdo de manipulação, limpeza e transformação dos dados para caber todo na aula 04.

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://tidyverse.tidyverse.org/articles/tidyverse-logo.png")
background-position: 0% 100%, 100% 0%
background-size: 20%, 15%

# .blue[**Untidy Data**]

<BR/>

```{r untidy data 1, echo = FALSE, warning = FALSE}
streams_raw[c(1, 101, 151, 201, 301, 401, 501), c(1, 2, 5, 6, 10, 11)] %>% 
  kbl() %>% 
  kable_material_dark("striped", 
                      fixed_thead = list(enabled = T, 
                                   background = "purple"),
                      full_width = F, 
                      html_font = "Serif")
```

???
**Untidy data**

Cada linha não é uma única observação, cada coluna não é uma única variável:
- Temos uma coluna para cada medida de largura e profundidade
- Há valores nos títulos das colunas e não variáveis 
- Largura e profundidade deveriam ser colunas únicas
- Cada linha é um riacho e não uma observação (deveria repetir o riacho até que todas as observações para aquele riacho terminassem).

Untidy date tende a ser largo.

Com esse formato não é possível gerar:
- sumários estatísticos
- novas tabelas para análises subsequentes
- visualizações

Felizmente, o `tidyverse` também fornece ferramentas para transformarmos *data frame*'s que se encontram no formato largo para o formato longo. Essas ferramentas encontram-se no pacote `tidyr`.

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fd33wubrfki0l68.cloudfront.net%2F5f8c22ec53a1ac61684f3e8d59c623d09227d6b9%2Fb15de%2Fimages%2Fhex-tidyr.png&f=1&nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 20%, 15%

# .blue[**Pacote tidyr**]

<BR/>

- Função .red[`gather()`]

```{r gather() tidyr 1, echo = FALSE, fig.align='center'}
knitr::include_graphics("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Ftse3.mm.bing.net%2Fth%3Fid%3DOIP.suFnb30E23UW0Q5pNBzWywHaDi%26pid%3DApi&f=1")
```

  
???
A função gather() colapsa multiplas colunas em duas colunas, tranformando os dados de formato largo para o formato longo.


---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fd33wubrfki0l68.cloudfront.net%2F5f8c22ec53a1ac61684f3e8d59c623d09227d6b9%2Fb15de%2Fimages%2Fhex-tidyr.png&f=1&nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 20%, 15%

# .blue[**Pacote tidyr - gather()**]<br/>
<BR/>

.center[.red[**Formato Largo para Longo**]]

```{r gather() tidyr 2, eval = FALSE, fig.align='center'}
gather(data = streams_raw, 
       key = "original_width", 
       value = "width", 
       Width.1:Width.5)
```

<BR/>

```{r gather() tidyr 3, eval = FALSE, fig.align='center'}
gather(data = streams_raw, 
       key = "original_depth", 
       value = "depth", 
       Depth.1:Depth.25)
```

???
Explicar os argumentos.


---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fd33wubrfki0l68.cloudfront.net%2F5f8c22ec53a1ac61684f3e8d59c623d09227d6b9%2Fb15de%2Fimages%2Fhex-tidyr.png&f=1&nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 20%, 15%

# .blue[**Pacote tidyr - gather()**]
.center[.red[**Formato Largo para Longo**]]
```{r make data tidy 1, echo = TRUE, eval = FALSE, warning = FALSE}
streams_raw %>% 
  select(date = Data, stream = Stream, Width.1:Width.5) %>% 
  gather(key = "original_width", value = "width", Width.1:Width.5) 
```

```{r make data tidy 2, echo = FALSE, eval = TRUE, warning = FALSE}
head(streams_raw, n = 1) %>% 
  select(date = Data, stream = Stream, Width.1:Width.5) %>% 
  gather(key = "original_width", value = "width", Width.1:Width.5) %>%
  mutate(date = zoo::as.yearmon(date)) %>% 
  kbl() %>% 
  kable_material_dark("striped", 
                      fixed_thead = list(enabled = T, 
                                   background = "purple"),
                      full_width = F, 
                      html_font = "Serif") 
```

???
A função gather() colapsa multiplas colunas em duas colunas, tranformando os dados de formato largo para o formato longo.


---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fd33wubrfki0l68.cloudfront.net%2F5f8c22ec53a1ac61684f3e8d59c623d09227d6b9%2Fb15de%2Fimages%2Fhex-tidyr.png&f=1&nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 20%, 15%

# .blue[**Pacote tidyr - gather()**]
.center[.red[**Formato Largo para Longo**]]
```{r make data tidy 3, echo = TRUE, eval = FALSE, warning = FALSE}
streams_raw %>% 
  select(date = Data, stream = Stream, Depth.1:Depth.25) %>% 
  gather(key = "original_depth", value = "depth", Depth.1:Depth.25)
```

```{r make data tidy 4, echo = FALSE, eval = TRUE, warning = FALSE}
head(streams_raw, n = 1) %>% 
  select(date = Data, stream = Stream, Depth.1:Depth.25) %>% 
  gather(key = "original_depth", value = "depth", Depth.1:Depth.25) %>%
  mutate(date = zoo::as.yearmon(date)) %>% 
  kbl() %>% 
  kable_material_dark("striped", 
                      fixed_thead = list(enabled = T, 
                                   background = "purple"),
                      full_width = F, 
                      html_font = "Serif") 
```

???
A função gather() colapsa multiplas colunas em duas colunas, tranformando os dados de formato largo para o formato longo.


---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fd33wubrfki0l68.cloudfront.net%2F5f8c22ec53a1ac61684f3e8d59c623d09227d6b9%2Fb15de%2Fimages%2Fhex-tidyr.png&f=1&nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 20%, 15%

# .blue[**Pacote tidyr - gather()**]
.center[.red[**Formato Largo para Longo**]]
```{r make data tidy 5, echo = TRUE, eval = FALSE, warning = FALSE}
streams_raw %>% 
  select(date = Data, stream = Stream, 
         Width.1:Width.5,
         Depth.1:Depth.25) %>% 
  gather(key = "original_width", 
         value = "width",
         Width.1:Width.5) %>% 
  gather(key = "original_depth", 
         value = "depth", 
         Depth.1:Depth.25) 
```

```{r make data tidy 6, echo = FALSE, eval = TRUE, warning = FALSE}
streams_raw2 <- streams_raw %>% 
  select(date = Data, stream = Stream, 
         Width.1:Width.5,
         Depth.1:Depth.25) %>% 
  gather(key = "original_width", 
         value = "width",
         Width.1:Width.5) %>% 
  gather(key = "original_depth", 
         value = "depth", 
         Depth.1:Depth.25) %>% 
  mutate(date = zoo::as.yearmon(date))
```



???
A função gather() colapsa multiplas colunas em duas colunas, tranformando os dados de formato largo para o formato longo.


---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fd33wubrfki0l68.cloudfront.net%2F5f8c22ec53a1ac61684f3e8d59c623d09227d6b9%2Fb15de%2Fimages%2Fhex-tidyr.png&f=1&nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 20%, 15%

# .blue[**Pacote tidyr - gather()**]
.center[.red[**Formato Largo para Longo**]]
```{r make data tidy 7, echo = FALSE, eval = TRUE, warning = FALSE}
head(streams_raw, n = 1) %>% 
  select(date = Data, stream = Stream, Width.1:Width.5, Depth.1:Depth.25) %>% 
  gather(key = "original_width", value = "width", Width.1:Width.5) %>% 
  gather(key = "original_depth", value = "depth", Depth.1:Depth.25) %>%
  mutate(date = zoo::as.yearmon(date)) %>% 
  kbl() %>% 
  kable_material_dark("striped", 
                      fixed_thead = list(enabled = T, 
                                   background = "purple"),
                      full_width = F, 
                      html_font = "Serif") 
```


???
A função gather() colapsa multiplas colunas em duas colunas, tranformando os dados de formato largo para o formato longo.


---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fd33wubrfki0l68.cloudfront.net%2F5f8c22ec53a1ac61684f3e8d59c623d09227d6b9%2Fb15de%2Fimages%2Fhex-tidyr.png&f=1&nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 20%, 15%

# .blue[**Pacote tidyr - separate()**]

<BR/>


```{r tidyr separate() 1, echo = FALSE, eval = TRUE, fig.align='center'}
knitr::include_graphics("https://external-content.duckduckgo.com/iu/?u=http%3A%2F%2Fwww.rforfinance.com%2Fimg%2Fseparate.png&f=1&nofb=1")
```


???
A função separate() separa uma coluna em duas colunas, gerando duas nova variável.


---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fd33wubrfki0l68.cloudfront.net%2F5f8c22ec53a1ac61684f3e8d59c623d09227d6b9%2Fb15de%2Fimages%2Fhex-tidyr.png&f=1&nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 20%, 15%

# .blue[**Pacote tidyr - separate()**]
.center[.red[**Separar uma Coluna em Duas**]]
```{r tidyr separate() 2, echo = TRUE, eval = FALSE}
streams_raw2 %>% 
  separate(col = original_width, 
           into = c("original_width", "width_obs"))
```

```{r tidyr separete() 3, echo = FALSE, eval = TRUE}
head(streams_raw2, n = 5) %>% 
  separate(col = original_width, into = c("original_width", "width_obs")) %>% 
  kbl() %>% 
  kable_material_dark("striped", 
                      fixed_thead = list(enabled = T, 
                                   background = "purple"),
                      full_width = F, 
                      html_font = "Serif") 
```


???
A função separate() separa uma coluna em duas colunas, gerando uma nova variável.


---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fd33wubrfki0l68.cloudfront.net%2F5f8c22ec53a1ac61684f3e8d59c623d09227d6b9%2Fb15de%2Fimages%2Fhex-tidyr.png&f=1&nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 20%, 15%

# .blue[**Pacote tidyr - separate()**]
.center[.red[**Separar uma Coluna em Duas**]]
```{r tidyr separate() 4, echo = TRUE, eval = FALSE}
streams_raw2 %>% 
  separate(col = "original_depth", 
           into = c("original_depth", "depth_obs"))
```

```{r tidyr separete() 5, echo = FALSE, eval = TRUE}
head(streams_raw2, n = 5) %>% 
  separate(col = original_depth, into = c("original_depth", "depth_obs")) %>% 
  kbl() %>% 
  kable_material_dark("striped", 
                      fixed_thead = list(enabled = T, 
                                   background = "purple"),
                      full_width = F, 
                      html_font = "Serif") 
```


???
A função separate() separa uma coluna em duas colunas, gerando uma nova variável.


---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fd33wubrfki0l68.cloudfront.net%2F5f8c22ec53a1ac61684f3e8d59c623d09227d6b9%2Fb15de%2Fimages%2Fhex-tidyr.png&f=1&nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 20%, 15%

# .blue[**Pacote tidyr - separate()**]
.center[.red[**Separar uma Coluna em Duas**]]
```{r tidyr separate() 6, echo = TRUE, eval = FALSE}
streams_raw2 %>% 
  separate(col = "original_width", 
           into = c("original_width", "width_obs")) %>% 
  separate(col = "original_depth", 
           into = c("original_depth", "depth_obs"))
```

```{r tidyr separete() 7, echo = FALSE, eval = TRUE}
head(streams_raw2, n = 4) %>% 
  separate(col = "original_width", 
           into = c("original_width", "width_obs")) %>% 
  separate(col = "original_depth", 
           into = c("original_depth", "depth_obs")) %>% 
  kbl() %>% 
  kable_material_dark("striped", 
                      fixed_thead = list(enabled = T, 
                                   background = "purple"),
                      full_width = F, 
                      html_font = "Serif") 
```


???
A função separate() separa uma coluna em duas colunas, gerando uma nova variável.


---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fd33wubrfki0l68.cloudfront.net%2F5f8c22ec53a1ac61684f3e8d59c623d09227d6b9%2Fb15de%2Fimages%2Fhex-tidyr.png&f=1&nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 20%, 15%

# .blue[**Pacote tidyr - spread()**]

<BR/>


```{r tidyr spread() 1, echo = FALSE, eval = TRUE, fig.align='center'}
knitr::include_graphics("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Flearn.r-journalism.com%2Fwrangling%2Ftidyr_joins%2Fimages%2Fspread.png&f=1&nofb=1")
```


???
A função spread() transforma os dados do formato longo para o formato largo, reduzindo o número de linhas e aumentando o número de colunas. 


---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fd33wubrfki0l68.cloudfront.net%2F5f8c22ec53a1ac61684f3e8d59c623d09227d6b9%2Fb15de%2Fimages%2Fhex-tidyr.png&f=1&nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 20%, 15%

# .blue[**Pacote tidyr - spread()**]
.center[.red[**Formato Longo para Largo**]]
```{r tidyr spread() 2, echo = TRUE, eval = FALSE}
tadpoles_freq_stream %>%
  select(stream, species, n) %>% 
  group_by(stream) %>% 
  spread(key = species, 
         value =  n,
         fill = 0)
```

```{r tidyr spread() 3, echo = FALSE, eval = TRUE}
tadpoles_community <- tadpoles_freq_stream %>%
  select(stream, species, n) %>% 
  group_by(stream) %>% 
  spread(key = species, 
         value =  n,
         fill = 0) 
head(tadpoles_community, n = 4) %>% 
  kbl() %>% 
  kable_material_dark("striped", 
                      fixed_thead = list(enabled = T, 
                                   background = "purple"),
                      full_width = F, 
                      html_font = "Serif") 
```


???
Explicar argumentos. 
key = é a coluna que vai se transformar em variável.
value = é a coluna que vai se transformar em observação.
fill = o valor que vai substituir valores ausentes (NA)


---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fd33wubrfki0l68.cloudfront.net%2F5f8c22ec53a1ac61684f3e8d59c623d09227d6b9%2Fb15de%2Fimages%2Fhex-tidyr.png&f=1&nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 20%, 15%

# .blue[**Pacote tidyr - spread()**]
.center[.red[**Formato Longo para Largo**]]
```{r tidyr spread() 4, echo = TRUE, eval = FALSE}
tadpoles_freq_date_stream %>%
  select(date, stream, species, n) %>% 
  group_by(date, stream) %>% 
  spread(key = species, 
         value =  n,
         fill = 0)
```

```{r tidyr spread() 5, echo = FALSE, eval = TRUE}
tadpoles_community_date <- tadpoles_freq_date_stream %>%
  select(date, stream, species, n) %>% 
  group_by(date, stream) %>% 
  spread(key = species, 
         value =  n,
         fill = 0)
head(tadpoles_community_date, n = 4) %>% 
  kbl() %>% 
  kable_material_dark("striped", 
                      fixed_thead = list(enabled = T, 
                                   background = "purple"),
                      full_width = F, 
                      html_font = "Serif") 
```


???
Explicar argumentos. 
key = é a coluna que vai se transformar em variável.
value = é a coluna que vai se transformar em observação.
fill = o valor que vai substituir valores ausentes (NA)


---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.tidyverse.org%2Fblog%2F2020%2F06%2Fdplyr-1-0-0%2Fdplyr.png&f=1&nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 20%, 15%

# .blue[**Unindo Dois *Data Frame*'s com inner_join() - Pacote dplyr**]

<BR/>


```{r dplyr inner_join() 1, echo = TRUE, eval = FALSE}
tadpoles_rich_stream %>% 
  inner_join(streams_variables, 
             by = c("stream" = "stream"))
```

```{r dplyr inner_join() 2, echo = FALSE, eval = TRUE}
tadpoles_rich_streams_variables <- tadpoles_rich_stream %>% 
  inner_join(streams_variables, 
             by = c("stream" = "stream"))
head(tadpoles_rich_streams_variables, n = 4) %>% 
  kbl() %>% 
  kable_material_dark("striped", 
                      fixed_thead = list(enabled = T, 
                                   background = "purple"),
                      full_width = F, 
                      html_font = "Serif") 
```


???
Realiza a união entre dois data frames incluindo todas as linhas de x e y.
by = nome da coluna pela qual a combinação entre os dois data frames será realizada.

Obs: aqui precisa adicionar ao script da aula o comando para carregar os dados dos riachos.

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.tidyverse.org%2Fblog%2F2020%2F06%2Fdplyr-1-0-0%2Fdplyr.png&f=1&nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 20%, 15%

# .blue[**Unindo Dois *Data Frame*'s com inner_join() - Pacote dplyr**]

<BR/>


```{r dplyr inner_join() 3, echo = TRUE, eval = FALSE}
tadpoles_rich_date_stream %>% 
  inner_join(streams_date_variables,
             by = c("date" = "date", "stream" = "stream"))
```

```{r dplyr inner_join() 4, echo = FALSE, eval = TRUE}
streams_date_variables <- streams_date_variables %>% 
  mutate(date = zoo::as.yearmon(date)) 
  
tadpoles_rich_date_streams_variables <- tadpoles_rich_date_stream %>% 
  inner_join(streams_date_variables,
             by = c("date" = "date", "stream" = "stream"))
head(tadpoles_rich_date_streams_variables, n = 4) %>% 
  kbl() %>% 
  kable_material_dark("striped", 
                      fixed_thead = list(enabled = T, 
                                   background = "purple"),
                      full_width = F, 
                      html_font = "Serif") 
```


???
Realiza a união entre dois data frames incluindo todas as linhas de x e y.
by = nome da coluna pela qual a combinação entre os dois data frames será realizada. Note que é possível realizar a união de dois data frames informando mais de uma coluna como referência.

Existem outras funções que realizam a união entre dois data frames:
- left_join() - toma o data frame da esquerda como referência (primeiro data frame informado) e inclui todas as suas linhas 
- right_join() - toma o data frame da direita como referência (segundo data frame informado) e inclui todas as suas linhas  

IMPORTANTE: é necessário que as colunas utilizadas como referência para unir os dois data frames sejam do mesmo tipo, caso contrário você não conseguirá realizar a união.

Obs: aqui precisa adicionar ao script da aula o comando para carregar os dados dos riachos.

---

# .blue[**Fluxo de Trabalho para Análise de Dados - Visualização**]

```{r data analysis pipeline 2, echo = FALSE, fig.align='center'}
knitr::include_graphics("https://d33wubrfki0l68.cloudfront.net/795c039ba2520455d833b4034befc8cf360a70ba/558a5/diagrams/data-science-explore.png")
```
- Ferramenta .red[indispensável] à análise de dados<br/>
<BR/>
- .red[Representação visual] de dados brutos e processados<br/>
<BR/>
- .red[Análise exploratória]<br/>
<BR/>
- .red[Interpretação] e .red[comunicação] de resultados


???
Cheagamos a quarta estapa, visualizar. 

Crédito da imagem: [R for Data Science](https://d33wubrfki0l68.cloudfront.net/795c039ba2520455d833b4034befc8cf360a70ba/558a5/diagrams/data-science-explore.png)

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&f=1&nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 20%, 15%

# .blue[**ggplot2 - Gramática Gráfica em R**]

<BR/>

- Diferentes .red[camadas] de elementos "gramaticais"<br/>
<BR/>
- Mapeamento de elementos .red[estéticos]<br/>
<BR/>
- Mapeamento de elementos .red[geométricos]<br/>
<BR/>
- Camadas = substantivos e adjetivos<br/>
<BR/>
- Mapeamento estético = regras gramaticais

???
O pacote ggplot2 foi escrito com base na ideia de que um gráfico é construído a partir de diferentes camadas de elementos gramaticais e do mapeamento de elementos estéticos.

Segundo a analogia com a gramática escrita, as camadas são como os substantivos e adjetivos e o mapeamento estético é como as regras gramaticais que determinam como operar esse vocabulário.

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&f=1&nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 20%, 15%

# .blue[**ggplot2 - Gramática Gráfica em R**]

<BR/>

.center[.red[**Três Elementos Essenciais da Gramática Gráfica**]]
```{r ggplot2 elementos essenciais 1, echo = FALSE}
data.frame(Elemento = c("Dados", "Estéticos", "Geometrias"), Descrição = c("Os dados que estão sendo plotados", "A escala em que estamos mapeando nossos dados", "O elementos visuais utilizados para representar os dados")) %>% 
  kbl() %>% 
  kable_material_dark("striped", 
                      fixed_thead = list(enabled = T, 
                                   background = "purple"),
                      full_width = F, 
                      html_font = "Serif") 
```

???
Existem três elementos gramaticais essenciais: os dados, os (elementos) estéticos e os (elementos) geométricos.

A camada de dados se referem naturalmente aos dados 

A camada de estéticos se referem a escala a qual mapearemos os dados 

A camada gemoétrica se refere a forma que os dados assumirão no gráfico.

Essas são as camadas obrigatórias que precisamos alimentar com informações para gerar o gráfico

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&f=1&nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 20%, 15%

# .blue[**ggplot2 - Gramática Gráfica em R**]
.center[.red[**Elementos Essenciais e Não Essenciais da Gramática Gráfica**]]
```{r ggplot2 elementos essenciais e não essenciais 1, echo = FALSE}
data.frame(Elemento = c("Dados", "Estéticos", "Geometrias", "Temas", "Estatística", "Coordenadas", "Facetas"), Descrição = c("Os dados que estão sendo plotados", "A escala em que estamos mapeando nossos dados", "O elementos visuais utilizados para representar os dados", "Aparência do gráfico", "Representações que melhoram a compreensão", "O espaço em que os dados são plotados", "Gera múltiplos gráficos")) %>% 
  kbl() %>% 
  kable_material_dark("striped", 
                      fixed_thead = list(enabled = T, 
                                   background = "purple"),
                      full_width = F, 
                      html_font = "Serif") 
```

???
Essas são as camadas não obrigatórias.


---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&f=1&nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 20%, 15%

# .blue[**ggplot2 - Gramática Gráfica em R**]
.center[.red[**Elementos e Argumentos Correspondentes**]]
```{r ggplot2 elementos e argumentos 1, echo = FALSE}
data.frame(Elemento = c("Data", "Aesthetics", "Geometries", "Themes", "Statistics", "Coordinates", "Facets"), 
           Args1 = c("", "x-axis/y-axis", "point", "to many...", "binning", "cartesian", "columns"), 
           Args2 = c("", "colour/fill", "line", "", "smoothing", "fixed", "rows"), 
           Args3 = c("", "size/labels", "histogram", "", "descriptive", "polar", ""),
           Args4 = c("", "alpha/shape", "bar", "", "inferential", "limits", ""),
           Args5 = c("", "line width/line type", "boxplot", "", "", "", "")) %>% 
  kbl() %>% 
  kable_material_dark("striped", 
                      fixed_thead = list(enabled = T, 
                                   background = "purple"),
                      full_width = F, 
                      html_font = "Serif") 
```

???
Essas são as camadas não obrigatórias.


---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&f=1&nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 20%, 15%

# .blue[**ggplot2 - Gramática Gráfica em R**]<br/>
<BR/>


.center[.red[**Sobreposição de Camadas**]]

.pull-left[
```{r ggplot2 camada dados 1, echo = FALSE, fig.align='center'}
knitr::include_graphics("https://englelab.gatech.edu/useRguide/images/dataviz/ge_geom.png")
```
]

.pull-right[
```{r ggplot2 camada dados 2, eval = FALSE}
{{ tadpoles_len_sp %>%  }}
  drop_na() %>% 
  ggplot(aes(x = species, 
             y = body_len)) +
  geom_point()
```
]

.center[.red[**Dados**]]
???


---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&f=1&nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 20%, 15%


# .blue[**ggplot2 - Gramática Gráfica em R**]<br/>
<BR/>


.center[.red[**Sobreposição de Camadas**]]

.pull-left[
```{r ggplot2 camada dados 3, echo = FALSE, fig.align='center'}
knitr::include_graphics("https://englelab.gatech.edu/useRguide/images/dataviz/ge_geom.png")
```
]

.pull-right[
```{r ggplot2 camada dados 4, eval = FALSE}
 tadpoles_len_sp %>%  
  drop_na() %>% 
{{  ggplot(aes(x = species, }}
{{             y = body_len)) + }}
  geom_point()
```
]

.center[.red[**Dados + Estéticos**]]
???


---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&f=1&nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 20%, 15%

# .blue[**ggplot2 - Gramática Gráfica em R**]<br/>
<BR/>


.center[.red[**Sobreposição de Camadas**]]

.pull-left[
```{r ggplot2 camada dados 5, echo = FALSE, fig.align='center'}
knitr::include_graphics("https://englelab.gatech.edu/useRguide/images/dataviz/ge_geom.png")
```
]

.pull-right[
```{r ggplot2 camada dados 6, eval = FALSE}
 tadpoles_len_sp %>%  
  drop_na() %>% 
  ggplot(aes(x = species, 
             y = body_len)) + 
{{  geom_point() }}
```
]

.center[.red[**Dados + Estéticos + Geométricos**]]
???


---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&f=1&nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 20%, 15%

# .blue[**Visualizando relações - gráficos de pontos**]<br/>
<BR/>

.center[.red[**Tamanho do Corpo x Espécie**]]
.pull-left[
```{r ggplot2 slide 1, echo = FALSE, fig.align='center', out.width= "100%"}
tadpoles_len_sp %>% 
  drop_na() %>% 
  ggplot(aes(x = species, y = body_len)) +
  geom_point(size = 5) + 
  theme(text = element_text(size = 28))
```
]

.pull-right[
```{r ggplot2 pontos x categorias 1, echo = TRUE, eval = FALSE}
tadpoles_len_sp %>% 
  drop_na() %>% 
  ggplot(aes(x = species, 
             y = body_len)) +
  geom_point() 
```

]
???
Gráfico útil para detectar valores fora da amplitude esperada. É necessário investigar esses valores.

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&f=1&nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 20%, 15%

# .blue[**Visualizando relações - gráficos de pontos**]<br/>
<BR/>

.center[.red[**Localizando o Erro**]]
```{r localizando o erro, echo = TRUE, eval = FALSE}
tadpoles_len_sp %>% 
  filter(species == "Ca" | species == "Hc", body_len > 30)  
```

```{r localizando o erro 1, echo = FALSE}
tadpoles_len_sp %>% 
  filter(species == "Ca" | species == "Hc", body_len > 30) %>% 
  kbl() %>% 
  kable_material_dark("striped", 
                      fixed_thead = list(enabled = T, 
                                   background = "purple"),
                      full_width = F, 
                      html_font = "Serif") 
```


???


---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&f=1&nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 20%, 15%

# .blue[**Visualizando relações - gráficos de pontos**]<br/>
<BR/>

.center[.red[**Corrigindo o Erro**]]

```{r resolvendo o erro 1}
# Resolvendo valores trocados em HC
tadpoles_len_sp$total_len[which(
  tadpoles_len_sp$species == "Hc" &
    tadpoles_len_sp$total_len == 9.31
  )] <- 32.64
tadpoles_len_sp$body_len[which(
  tadpoles_len_sp$species == "Hc" &
    tadpoles_len_sp$body_len == 32.64
  )] <- 9.31
```

???


---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&f=1&nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 20%, 15%

# .blue[**Visualizando relações - gráficos de pontos**]<br/>
<BR/>

.center[.red[**Localizando o Erro**]]

```{r localizando o erro 2, echo = TRUE, eval = FALSE}
tadpoles_len_sp %>% 
  filter(species == "Sf", body_len > 15) 
```

```{r localizando o erro 3, echo = FALSE}
tadpoles_len_sp %>% 
  filter(species == "Sf", body_len > 15) %>% 
  kbl() %>% 
  kable_material_dark("striped", 
                      fixed_thead = list(enabled = T, 
                                   background = "purple"),
                      full_width = F, 
                      html_font = "Serif") 
```


???


---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&f=1&nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 20%, 15%

# .blue[**Visualizando relações - gráficos de pontos**]<br/>
<BR/>

.center[.red[**Corrigindo o Erro**]]
```{r resolvendo o erro 2, warning=FALSE}
# Resolvendo valores trocados em Sf
tadpoles_len_sp$total_len[which(
  tadpoles_len_sp$species == "Sf" &
    tadpoles_len_sp$total_len == 5.52 |
    tadpoles_len_sp$total_len == 6.30
  )] <- c(17.73, 15.97)

tadpoles_len_sp$body_len[which(
  tadpoles_len_sp$species == "Sf" &
    tadpoles_len_sp$body_len == 17.73 |
    tadpoles_len_sp$body_len == 15.97
  )] <- c(5.52, 6.30)
```


???
```{r novo tadpoles_len_sp 1, echo = FALSE}
# resolve o Ca vom valores acima do esperado
tadpoles_len_sp <- tadpoles_len_sp %>% 
  filter(body_len < 30, total_len < 90)
```

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&f=1&nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 20%, 15%

# .blue[**Visualizando relações - gráficos de pontos**]<br/>
<BR/>

.center[.red[**Tamanho do Corpo x Espécie**]]

.pull-left[
```{r pontos x categorias slide 2, echo = FALSE}
tadpoles_len_sp %>% 
  ggplot(aes(x = species, y = body_len)) +
  geom_point(size = 3) + 
  theme(text = element_text(size = 24))
```
]

.pull-right[
```{r ggplot2 pontos x categorias 2, echo = TRUE, eval = FALSE, fig.align='center', out.width= "100%"}
tadpoles_len_sp %>% 
  drop_na() %>% 
  ggplot(aes(x = species, 
             y = body_len)) +
  geom_point()
```
]

???
Agora está tudo ok com os valores de tamanho corporal.

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&f=1&nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 20%, 15%

# .blue[**Visualizando relações - gráficos de pontos**]<br/>
<BR/>

.center[.red[**Tamanho Total x Espécie**]]

.pull-left[
```{r ggplot2 pontos x categorias 3, echo = FALSE, fig.align='center'}
tadpoles_len_sp %>% 
  drop_na() %>% 
  ggplot(aes(x = species, 
             y = total_len)) +
  geom_point(size = 3) + 
  theme(text = element_text(size = 24))
```
]

.pull-right[
```{r ggplot2 pontos x categorias 4, eval = FALSE}
tadpoles_len_sp %>% 
  drop_na() %>% 
  ggplot(aes(x = species, 
             y = total_len)) +
  geom_point()
```
]

???
E tudo ok também com os valores de tamanho total.

Daqui para frente utilizaremos apenas os dados de tamanho do corpo para visualização para evitar redundância.

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&f=1&nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 20%, 15%

# .blue[**Mapeamento Estético - color**]<br/>
<BR/>

.center[.red[**Tamanho do Corpo x Espécie x Estágio**]]
.pull-left[
```{r ggplot2 pontos x categorias 5, echo = FALSE, fig.align='center', out.width= "100%"}
tadpoles_len_sp %>% 
  drop_na() %>% 
  ggplot(aes(x = species, 
             y = body_len, 
             color = stage)) +
  geom_point(size = 3) + 
  theme(text = element_text(size = 24))
```
]

.pull-right[
```{r ggplot2 pontos x categorias 6, eval = FALSE}
tadpoles_len_sp %>% 
  drop_na() %>% 
  ggplot(aes(x = species, 
             y = body_len, 
            {{ color = stage)) + }}
  geom_point()
```
]


???
Adicionando um mapeamento estético: `color = stage`
O mapeamento estético `color = ` funciona tanto com variáveis discretas (inteiros ou fatores) quanto com variáveis contínuas (gera um gradiente de cor).

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&f=1&nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 20%, 15%

# .blue[**Atributo Geométrico - position**]<br/>
<BR/>

.center[.red[**Ajuste para Dados Sobrepostos**]]

- idnetity

- dodge

- stack

- fill

- .red[**jitter**]

- jitterdodge

- nudge

???
Adicionando um atributo `position = "jitter"` adiciona uma variação aleatória ao redor de cada observação para reduzir a sobreposição dos pontos.

ATENÇÃO!!!
Não confundir estéticos com atributos. Atributos serão sempre chamados na camada gemoétrica `geom_()`. Estéticos são chamados na camada de estéticos `aes()`.

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&f=1&nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 20%, 15%

# .blue[**Atributo Geométrico - position**]<br/>
<BR/>

.center[.red[**Tamanho do Corpo x Espécie x Estágio**]]
.pull-left[
```{r ggplot2 pontos x categorias 9, echo = FALSE, fig.align='center', out.width= "100%"}
tadpoles_len_sp %>% 
  drop_na() %>% 
  ggplot(aes(x = species, 
             y = body_len, 
             color = stage)) +
  geom_point(position = "jitter", size = 3) + 
  theme(text = element_text(size = 24))
```
]

.pull-right[
```{r ggplot2 pontos x categorias 10, eval = FALSE}
tadpoles_len_sp %>% 
  drop_na() %>% 
  ggplot(aes(x = species, 
             y = body_len, 
             color = stage)) +
{{ geom_point(position = "jitter") }}
```
]
???
Adicionando um mapeamento estético: `color = stage`

Adicionando um atributo `position = "jitter"` adiciona uma variação aleatória ao redor de cada observação para reduzir a sobreposição dos pontos.

ATENÇÃO!!!
Não confundir estéticos com atributos. Atributos serão sempre chamados na camada gemoétrica `geom_()`. Estéticos são chamados na camada de estéticos `aes()`.

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&f=1&nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 20%, 15%

# .blue[**Mapeamento Estético - alpha**]<br/>
<BR/>

.center[.red[**Tamanho do Corpo x Espécie x Estágio**]]
.pull-left[
```{r ggplot2 pontos x categorias 13, echo = FALSE, fig.align='center', out.width= "100%"}
tadpoles_len_sp %>% 
  drop_na() %>% 
  ggplot(aes(x = species, y = body_len, 
             color = stage, alpha = 0.7)) +
  geom_point(position = "jitter", size = 3) + 
  theme(text = element_text(size = 24))
```
]

.pull-right[
```{r ggplot2 pontos x categorias 14, eval = FALSE}
tadpoles_len_sp %>% 
  drop_na() %>% 
  ggplot(aes(x = species, 
             y = body_len, 
             color = stage, 
         {{  alpha = 0.7)) + }}
  geom_point(position = "jitter")
```
]
???
Adicionando um segundo mapeamento estético: `alpha = 0.5` (atribui um grau de transparência aos pontos)

Adicionando um atributo `position = "jitter"` adiciona uma variação aleatória ao redor de cada observação para reduzir a sobreposição dos pontos.

ATENÇÃO!!!
Não confundir estéticos com atributos. Atributos serão sempre chamados na camada gemoétrica `geom_()`. Estéticos são chamados na camada de estéticos `aes()`.

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&f=1&nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 20%, 15%

# .blue[**Mapeamento Estético - shape**]<br/>
<BR/>

.center[.red[**Tamanho do Corpo x Espécie x Estágio**]]
.pull-left[
```{r ggplot2 pontos x categorias 17, echo = FALSE, fig.align='center', out.width= "100%"}
tadpoles_len_sp %>% 
  drop_na() %>% 
  ggplot(aes(x = species, y = body_len, 
             color = stage, alpha = 0.7,
             shape = stage)) +
  geom_point(position = "jitter", size = 3) + 
  theme(text = element_text(size = 24))
```
]

.pull-right[
```{r ggplot2 pontos x categorias 18, eval = FALSE}
tadpoles_len_sp %>% 
  drop_na() %>% 
  ggplot(aes(x = species, 
             y = body_len, 
             color = stage, 
             alpha = 0.7,
        {{   shape = stage)) + }}
  geom_point(position = "jitter")
```
]

???
Adicionando um mapeamento estético: `shape = stage`

Adicionando um atributo `position = "jitter"` adiciona uma variação aleatória ao redor de cada observação para reduzir a sobreposição dos pontos.

ATENÇÃO!!!
Não confundir estéticos com atributos. Atributos serão sempre chamados na camada gemoétrica `geom_()`. Estéticos são chamados na camada de estéticos `aes()`.

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&f=1&nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 20%, 15%

# .blue[**Mapeamento Estético - size**]<br/>
<BR/>

.center[.red[**Tamanho do Corpo x Espécie x Estágio**]]
.pull-left[
```{r ggplot2 pontos x categorias 21, echo = FALSE, fig.align='center', out.width= "100%", warning = FALSE}
tadpoles_len_sp %>% 
  drop_na() %>% 
  ggplot(aes(x = species, y = body_len, 
             color = stage, alpha = 0.7,
             shape = stage, size = stage)) +
  geom_point(position = "jitter") + 
  theme(text = element_text(size = 24))
```
]

.pull-right[
```{r ggplot2 pontos x categorias 22, eval = FALSE}
tadpoles_len_sp %>% 
  drop_na() %>% 
  ggplot(aes(x = species, 
             y = body_len, 
             color = stage, 
             alpha = 0.7,
            shape = stage,
        {{  size = stage)) + }}
  geom_point(position = "jitter")
```
]

???
Adicionando um terceiro mapeamento estético: `size = stage`

Adicionando um atributo `position = "jitter"` adiciona uma variação aleatória ao redor de cada observação para reduzir a sobreposição dos pontos.

ATENÇÃO!!!
Não confundir estéticos com atributos. Atributos serão sempre chamados na camada gemoétrica `geom_()`. Estéticos são chamados na camada de estéticos `aes()`.

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&f=1&nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 20%, 15%

# .blue[**Visualizando Relações - Gráfico de Pontos**]<br/>
<BR/>

.center[.red[**Tamanho do Corpo x Espécie x Estágio**]]

```{r ggplot2 melhor visualização 1, echo = FALSE, fig.align='center', out.width= "50%", warning = FALSE}
tadpoles_len_sp %>% 
  drop_na() %>% 
  ggplot(aes(x = species, y = body_len, 
             color = stage, alpha = 0.7)) +
  geom_point(position = position_jitter(0.25,
                                        seed = 136),
             size = 3) + 
  theme(text = element_text(size = 24))
```


???
Por enquanto, essa é a melhor representação para esses dados.

Já podemos fazer um brief sobre o que se pode extrair de informação do gráfico.

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&f=1&nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 20%, 15%

# .blue[**Visualizando Relações - Gráfico de Pontos**]<br/>
<BR/>

.center[.red[**Tamanho do Corpo x Espécie x Estágio**]]
.pull-left[
```{r ggplot2 melhor visualização 2, echo = FALSE, fig.align='center', out.width= "100%", warning = FALSE}
tadpoles_len_sp %>% 
  drop_na() %>% 
  ggplot(aes(x = species, y = body_len, 
             color = stage, alpha = 0.7)) +
  geom_point(position = position_jitter(0.25,
                                        seed = 136), size = 3) + 
  theme(text = element_text(size = 24))
```
]

.pull-right[
```{r ggplot2 melhor visualização 3, eval = FALSE}
tadpoles_len_sp %>% 
  drop_na() %>% 
  ggplot(aes(x = species, 
             y = body_len, 
             color = stage, 
             alpha = 0.7)) +
  geom_point(
    position = 
{{  position_jitter(0.25, }}
{{              seed = 136)) }}
```
]

???
Esse é o código do gráfico. Agora vamos aprender a alterar características importantes como o título dos eixos, suas escalas de variação, título e valores das legendas.

Faremos isso a partir da modificação da família de estéticos `scale_*_*()`

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&f=1&nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 20%, 15%

# .blue[**Modificando Estético - scale_*_*()**]<br/>
<BR/>

- .red[`scale_x_continuous()`]

- .red[`scale_y_*()`]

- .red[`scale_color_discrete()`]
  - ou .red[`scale_coulor_*()`]

- .red[`scale_fill_*()`]

- .red[`scale_shape_()`]

- .red[`scale_linetype_*()`]

- .red[`scale_size_*()`]

???
Para escolher corretamente a função necessária para alterar um estético, é necessário conhecer o tipo de dado com o qual se está trabalhando.

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&f=1&nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 20%, 15%

# .blue[**Modificando Estético - scale_*_*()**]<br/>
<BR/>

.center[.red[**Tamanho do Corpo x Espécie x Estágio**]]

```{r ggplot2 funções scale 1, eval = FALSE}
tadpoles_len_sp %>% 
  drop_na() %>% 
  ggplot(aes(x = species, 
             y = body_len, 
             color = stage, 
             alpha = 0.7)) +
  geom_point(position = 
  position_jitter(0.25,
            seed = 136)) +
{{ scale_x_discrete("Species") + }}
{{ scale_y_continuous("Body Length (mm)") + }}
{{ scale_color_discrete("Stage")  }}
```





???
O eixo x é formado por uma variável discreta, espécies. Podemos controlar características como o título do eixo utilizando `scale_x_discrete()`.

O eixo y é formado por uma variável contínua, tamanho do corpo. Podemos controlar características como o título do eixo utilizando `scale_x_continuous()`.

A legenda é controlada pelo estético `color` e é uma variável discreta, estágio de desenvolvimento. Podemos controlar suas características utilizando `sclae_color_discrete()`. 

O primeiro argumento será sempre o nome do estético. Nesse exemplo, `Species`, `Body Length (mm)` e `Stage`.

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&f=1&nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 20%, 15%

# .blue[**Modificando Estético - scale_*_*()**]<br/>
<BR/>

.center[.red[**Tamanho do Corpo x Espécie x Estágio**]]

```{r ggplot2 funções scale 2, echo = FALSE, fig.align='center', out.width= "50%"}
tadpoles_len_sp %>% 
  drop_na() %>% 
  ggplot(aes(x = species, y = body_len, 
             color = stage, alpha = 0.7)) +
  geom_point(position = position_jitter(0.25,
                                        seed = 136),
             size = 3) +
  scale_x_discrete("Species") +
  scale_y_continuous("Body Length (mm)") + 
  scale_color_discrete("Stage") +
  theme(text = element_text(size = 24))
```



???
O eixo x é formado por uma variável discreta, espécies. Podemos controlar características como o título do eixo utilizando `scale_x_discrete()`.

O eixo y é formado por uma variável contínua, tamanho do corpo. Podemos controlar características como o título do eixo utilizando `scale_x_continuous()`.

A legenda é controlada pelo estético `color` e é uma variável discreta, estágio de desenvolvimento. Podemos controlar suas características utilizando `sclae_color_discrete()`. 

O primeiro argumento será sempre o nome do estético. Nesse exemplo, `Species`, `Body Length (mm)` e `Stage`.

Os argumentos mais comumente utilizados, depois do título do eixo, são `limits`, `breaks`, `expand` e `labels`

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&f=1&nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 20%, 15%

# .blue[**Modificando Estético - scale_*_*()**]<br/>
<BR/>

.center[.red[**Tamanho do Corpo x Espécie x Estágio**]]

```{r ggplot2 funções scale 3, eval = FALSE}
tadpoles_len_sp %>% 
  drop_na() %>% 
  ggplot(aes(x = species, 
             y = body_len, 
             color = stage, 
             alpha = 0.7)) +
  geom_point(position = 
  position_jitter(0.25,
            seed = 136)) +
  scale_x_discrete("Species") + 
  scale_y_continuous("Body Length (mm)",
                     limits = c(0, 30)) + #<<
  scale_color_discrete("Stage") 
```


???
`limits`determina a amplitude da escala, ou seja, seus valores mínimos e máximos.

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&f=1&nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 20%, 15%

# .blue[**Modificando Estético - scale_*_*()**]<br/>
<BR/>

.center[.red[**Tamanho do Corpo x Espécie x Estágio**]]

```{r ggplot2 funções scale 4, echo = FALSE, fig.align='center', out.width="50%"}
tadpoles_len_sp %>% 
  drop_na() %>% 
  ggplot(aes(x = species, 
             y = body_len, 
             color = stage, 
             alpha = 0.7)) +
  geom_point(position = 
  position_jitter(0.25,
            seed = 136), 
  size = 3) +
  scale_x_discrete("Species") + 
  scale_y_continuous("Body Length (mm)",
                     limits = c(0, 30)) +
  scale_color_discrete("Stage") +
  theme(text = element_text(size = 24))
```


???
`limits`determina a amplitude da escala, ou seja, seus valores mínimos e máximos.

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&f=1&nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 20%, 15%

# .blue[**Modificando Estético - scale_*_*()**]<br/>
<BR/>

.center[.red[**Tamanho do Corpo x Espécie x Estágio**]]

```{r ggplot2 funções scale 5, eval = FALSE}
tadpoles_len_sp %>% 
  drop_na() %>% 
  ggplot(aes(x = species, 
             y = body_len, 
             color = stage, 
             alpha = 0.7)) +
  geom_point(position = 
  position_jitter(0.25,
            seed = 136)) +
  scale_x_discrete("Species") + 
  scale_y_continuous("Body Length (mm)",
                     limits = c(0, 30),
                     breaks = seq(0, 30, 5)) + #<<
  scale_color_discrete("Stage") 
```


???
`breaks` controla o intervalo entre os valores do eixo.

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&f=1&nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 20%, 15%

# .blue[**Modificando Estético - scale_*_*()**]<br/>
<BR/>

.center[.red[**Tamanho do Corpo x Espécie x Estágio**]]

```{r ggplot2 funções scale 6, echo = FALSE, fig.align='center', out.width="50%"}
tadpoles_len_sp %>% 
  drop_na() %>% 
  ggplot(aes(x = species, 
             y = body_len, 
             color = stage, 
             alpha = 0.7)) +
  geom_point(position = 
  position_jitter(0.25,
            seed = 136),
  size = 3) +
  scale_x_discrete("Species") + 
  scale_y_continuous("Body Length (mm)",
                     limits = c(0, 30),
                     breaks = seq(0, 30, 5)) + 
  scale_color_discrete("Stage") +
  theme(text = element_text(size = 24))
```


???
`breaks` controla o intervalo entre os valores do eixo.

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&f=1&nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 20%, 15%

# .blue[**Modificando Estético - scale_*_*()**]<br/>
<BR/>

.center[.red[**Tamanho do Corpo x Espécie x Estágio**]]

```{r ggplot2 funções scale 7, eval = FALSE}
tadpoles_len_sp %>% 
  drop_na() %>% 
  ggplot(aes(x = species, 
             y = body_len, 
             color = stage, 
             alpha = 0.7)) +
  geom_point(position = 
  position_jitter(0.25,
            seed = 136)) +
  scale_x_discrete("Species") + 
  scale_y_continuous("Body Length (mm)",
                     limits = c(0, 30),
                     breaks = seq(0, 30, 5),
                     expand = c(0, 0)) + #<<
  scale_color_discrete("Stage") 
```


???
`expand` é um vetor numérico de comprimento 2 que informa uma constante multiplicativa e outra aditiva usados para expandir a apmlitude das escalas e diminuir o espaço entre os dados e os eixos.

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&f=1&nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 20%, 15%

# .blue[**Modificando Estético - scale_*_*()**]<br/>
<BR/>

.center[.red[**Tamanho do Corpo x Espécie x Estágio**]]

```{r ggplot2 funções scale 8, echo = FALSE, fig.align='center', out.width="50%"}
tadpoles_len_sp %>% 
  drop_na() %>% 
  ggplot(aes(x = species, 
             y = body_len, 
             color = stage, 
             alpha = 0.7)) +
  geom_point(position = 
  position_jitter(0.25,
            seed = 136),
  size = 3) +
  scale_x_discrete("Species") + 
  scale_y_continuous("Body Length (mm)",
                     limits = c(0, 30),
                     breaks = seq(0, 30, 5),
                     expand = c(0, 0 )) + 
  scale_color_discrete("Stage") +
  theme(text = element_text(size = 24))
```


???
`expand` é um vetor numérico de comprimento 2 que informa uma constante multiplicativa e outra aditiva usados para expandir a apmlitude das escalas e diminuir o espaço entre os dados e os eixos.

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&f=1&nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 20%, 15%

# .blue[**Modificando Estético - scale_*_*()**]<br/>
<BR/>

.center[.red[**Tamanho do Corpo x Espécie x Estágio**]]

```{r ggplot2 funções scale 9, eval = FALSE}
tadpoles_len_sp %>% 
  drop_na() %>% 
  ggplot(aes(x = species, 
             y = body_len, 
             color = stage, 
             alpha = 0.7)) +
  geom_point(position = 
  position_jitter(0.25,
            seed = 136)) +
  scale_x_discrete("Species") + 
  scale_y_continuous("Body Length (mm)",
                     limits = c(0, 30),
                     breaks = seq(0, 30, 5),
                     expand = c(0, 0)) +
  scale_color_discrete("Development \nClass", #<<
                     labels = c("I", "II", "III", "IV", "V")) #<<
```


???
`labels` altera os nomes de variáveis catagóricas.

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&f=1&nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 20%, 15%

# .blue[**Modificando Estético - scale_*_*()**]<br/>
<BR/>

.center[.red[**Tamanho do Corpo x Espécie x Estágio**]]

```{r ggplot2 funções scale 10, echo = FALSE, fig.align='center', out.width="50%"}
tadpoles_len_sp %>% 
  drop_na() %>% 
  ggplot(aes(x = species, 
             y = body_len, 
             color = stage, 
             alpha = 0.7)) +
  geom_point(position = 
  position_jitter(0.25,
            seed = 136),
  size = 3) +
  scale_x_discrete("Species") + 
  scale_y_continuous("Body Length (mm)",
                     limits = c(0, 30),
                     breaks = seq(0, 30, 5)) + 
  scale_color_discrete("Development \nClass",
                     labels = c("I", "II", "III", "IV", "V")) +
  theme(text = element_text(size = 24))
```


???
`labels` altera os nomes de variáveis catagóricas.

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&f=1&nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 20%, 15%

# .blue[**Modificando Estético - labs()**]<br/>
<BR/>

.center[.red[**Tamanho do Corpo x Espécie x Estágio**]]

```{r ggplot2 funções scale 11, eval = FALSE}
tadpoles_len_sp %>% 
  drop_na() %>% 
  ggplot(aes(x = species, 
             y = body_len, 
             color = stage, 
             alpha = 0.7)) +
  geom_point(position = 
  position_jitter(0.25,
            seed = 136), 
  show.legend = c(alpha = FALSE)) + #<<
  labs(x = "Species", #<<
       y = "Body Length (mm)", #<<
       color = "Development \nClass") + #<<
  scale_color_discrete(labels = c("I", "II", "III", "IV", "V"))
```


???
`labs` altera os títulos dos eixos e da legenda.

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&f=1&nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 20%, 15%

# .blue[**Visualizando Relações - Gráficos de Pontos**]<br/>
<BR/>

.center[.red[**Tamanho do Corpo x Espécie x Estágio**]]

```{r ggplot2 funções scale 12, echo = FALSE, fig.align='center', out.width="50%"}
tadpoles_len_sp %>%
  drop_na() %>% 
  ggplot(aes(x = species, 
             y = body_len, 
             color = stage, 
             alpha = 0.7)) +
  geom_point(position = 
               position_jitter(0.25,
                               seed = 136),
             size = 3, show.legend = c(alpha = FALSE)) +
  labs(x = "Species",
       y = "Body Length (mm)",
       color = "Development \nClass") +
  scale_color_discrete(labels = c("I", "II", "III", "IV", "V")) +
  theme(text = element_text(size = 24))
```


???
`labs` altera os títulos dos eixos e da legenda.

Também permite adicionar título, subtítulo, legenda e um tag.

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&f=1&nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 20%, 15%

# .blue[**Modificando Geométricos - geom_*()**]<br/>
<BR/>

.center[.red[**Substituir pelo número de geoms disponíveis**]]

Listar os geoms disponíveis

???
A camada geométrica é a terceira camada essencial.

Ela determina o tipo do gráfico que será gerado.

Cerca de 50 funções geom_*()

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&f=1&nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 20%, 15%

# .blue[**Relação entre Variáveis - geom_point()**]<br/>
<BR/>

.center[.red[**Gráfico de Pontos<BR/>Tamanho do Corpo x Tamanho total**]]

.pull-left[
```{r ggplot2 funções scale 14, eval = FALSE, fig.align='center', out.width="100%"}
tadpoles_len_sp %>% 
  drop_na() %>% 
  ggplot(aes(x = total_len, #<<
             y = body_len)) + #<< 
  geom_point()
```

```{r ggplot2 camada dados, echo = FALSE, fig.align='center'}
knitr::include_graphics("https://englelab.gatech.edu/useRguide/images/dataviz/ge_geom.png")
```
]

.pull-right[
```{r ggplot2 funções scale 15, echo = FALSE, fig.align='center', out.width="100%"}
tadpoles_len_sp %>% 
  drop_na() %>% 
  ggplot(aes(x = total_len, 
             y = body_len)) +
  geom_point(size = 3) + 
  theme(text = element_text(size = 24))
```
]

???
Cada geom_*() está associado a estéticos específicos, alguns dos quais são essenciais.

X e Y são estéticos essenciais em geom_point()

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&f=1&nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 20%, 15%

# .blue[**Modificando Geométricos - geom_point()**]<br/>
<BR/>

.center[.red[**Tamanho do Corpo x Tamanho Total x Espécie**]]

.pull-left[
```{r ggplot2 funções scale 16, eval = FALSE, fig.align='center', out.width="100%"}
tadpoles_len_sp %>% 
  drop_na() %>% 
  ggplot(aes(x = total_len, 
             y = body_len,
             color = species)) + #<< 
  geom_point()
```

```{r ggplot2 camada geom_point() 2, echo = FALSE, fig.align='center'}
knitr::include_graphics("https://englelab.gatech.edu/useRguide/images/dataviz/ge_geom.png")
```
]

.pull-right[
```{r ggplot2 funções scale 17, echo = FALSE, fig.align='center', out.width="100%"}
tadpoles_len_sp %>% 
  filter(species %in% c("Ae", "Hc", "Pb", "Ps", "Sa")) %>% 
  drop_na() %>% 
  ggplot(aes(x = total_len, 
             y = body_len,
             color = species)) +
  geom_point(size = 3) + 
  theme(text = element_text(size = 24))
```
]

???
Cada geom_*() está associado a estéticos específicos, alguns dos quais são essenciais.

X e Y são estéticos essenciais em geom_point()

alpha, color, fill, shape, size e stroke são opicionais.

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&f=1&nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 20%, 15%

# .blue[**Sobrepondo Geométricos - geom_point()**]<br/>
<BR/>

.center[.red[**Tamanho do Corpo x Tamanho Total x Espécie**]]
```{r gerando médias para algumas sp, echo = FALSE, warning = FALSE}
tadpoles_media <- tadpoles_len_sp %>% 
  filter(species %in% c("Hp", "Pb", "Sa")) %>% 
  group_by(species) %>% 
  summarise_all(mean)
```

.pull-left[
```{r ggplot2 funções scale 18, eval = FALSE, fig.align='center', out.width="100%"}
tadpoles_len_sp %>% 
  filter(species %in% c("Hp", "Pb", "Sa")) %>% 
  drop_na() %>% 
  ggplot(aes(x = total_len, 
             y = body_len,
             color = species)) + 
  geom_point() + 
  geom_point(data = tadpoles_media, #<<  
             shape = 15, #<< 
             size = 8, #<<  
             fill = "black", #<<  
             stroke = 2) #<< 
```

```{r ggplot2 camada geom_point() 3, echo = FALSE, fig.align='center'}
knitr::include_graphics("https://englelab.gatech.edu/useRguide/images/dataviz/ge_geom.png")
```
]

.pull-right[
```{r ggplot2 funções scale 19, echo = FALSE, fig.align='center', out.width="100%", warnings = FALSE, message=FALSE}
tadpoles_len_sp %>% 
  filter(species %in% c("Hp", "Pb", "Sa")) %>% 
  drop_na() %>% 
  ggplot(aes(x = total_len, 
             y = body_len,
             color = species)) +
  geom_point(size = 3) + 
  geom_point(data = tadpoles_media, #<<  
             shape = 21, #<< 
             size = 12, #<<  
             fill = "black", #<<  
             stroke = 2) #<<  
  theme(text = element_text(size = 24))
```
]

???
Cada geom_*() está associado a estéticos específicos, alguns dos quais são essenciais.

X e Y são estéticos essenciais em geom_point()

alpha, color, fill, shape, size e stroke são opicionais.