<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Introdução ao R para Ecólogos</title>
    <meta charset="utf-8" />
    <meta name="author" content="Vitor Borges" />
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link href="libs/remark-css/default-fonts.css" rel="stylesheet" />
    <link href="libs/tile-view/tile-view.css" rel="stylesheet" />
    <script src="libs/tile-view/tile-view.js"></script>
    <link href="libs/animate.css/animate.xaringan.css" rel="stylesheet" />
    <link href="libs/tachyons/tachyons.min.css" rel="stylesheet" />
    <link href="libs/panelset/panelset.css" rel="stylesheet" />
    <script src="libs/panelset/panelset.js"></script>
    <script src="libs/clipboard/clipboard.min.js"></script>
    <link href="libs/shareon/shareon.min.css" rel="stylesheet" />
    <script src="libs/shareon/shareon.min.js"></script>
    <link href="libs/xaringanExtra-shareagain/shareagain.css" rel="stylesheet" />
    <script src="libs/xaringanExtra-shareagain/shareagain.js"></script>
    <script src="libs/js-cookie/js.cookie.js"></script>
    <script src="libs/peerjs/peerjs.min.js"></script>
    <script src="libs/tiny.toast/toast.min.js"></script>
    <link href="libs/xaringanExtra-broadcast/broadcast.css" rel="stylesheet" />
    <script src="libs/xaringanExtra-broadcast/broadcast.js"></script>
    <script src="libs/fabric/fabric.min.js"></script>
    <link href="libs/xaringanExtra-scribble/scribble.css" rel="stylesheet" />
    <script src="libs/xaringanExtra-scribble/scribble.js"></script>
    <script>document.addEventListener('DOMContentLoaded', function() { window.xeScribble = new Scribble({"pen_color":["#FF0000"],"pen_size":3,"eraser_size":30,"palette":[]}) })</script>
    <link href="libs/xaringanExtra-clipboard/xaringanExtra-clipboard.css" rel="stylesheet" />
    <script src="libs/xaringanExtra-clipboard/xaringanExtra-clipboard.js"></script>
    <script>window.xaringanExtraClipboard(null, {"button":"Copy Code","success":"Copied!","error":"Press Ctrl+C to Copy"})</script>
    <script src="libs/kePrint/kePrint.js"></script>
    <link href="libs/lightable/lightable.css" rel="stylesheet" />
  </head>
  <body>
    <textarea id="source">


layout: true
name: basic
background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true")
background-position: 0% 100%
background-size: 15%
class: inverse



---
name: Title
background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true")
background-position: 0% 100%
background-size: 15%
class: inverse, center, middle, title-slide

# .blue[**Introdução ao R para Ecólogos**]

## .blue[**⚔&lt;br/&gt;Visualização de Dados com ggplot2**]

### .blue[Vitor Borges-Júnior]

### .blue[PPGBIO - UNIRIO]

### .blue[2021/07/13]

???
IDEIAS DE MELHORIAS PARA O PRÓXIMO CURSO

- Condensar o conteúdo de visualização dos dados para caber todo em uma aula.

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&amp;f=1&amp;nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 15%, 10%

# .blue[**ggplot2 - Gramática Gráfica em R**]

.center[.red[**Três Elementos Essenciais da Gramática Gráfica**]]

.pull-left[
&lt;img src="07-Visualizacao-de-Dados-com-ggplot2_files/figure-html/unnamed-chunk-2-1.png" width="85%" style="display: block; margin: auto;" /&gt;
]

.pull-right[
&lt;br/&gt;
  &lt;BR/&gt;
&lt;br/&gt;
  &lt;BR/&gt;
&lt;table class=" lightable-material-dark lightable-striped" style="font-family: Serif; width: auto !important; margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;position: sticky; top:0; background-color: purple;"&gt; Descrição &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Aparência do gráfico &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; O elementos visuais utilizados para representar os dados &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; A escala em que estamos mapeando nossos dados &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Os dados que estão sendo plotados &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

]

???
Existem três elementos gramaticais essenciais: os dados, os (elementos) estéticos e os (elementos) geométricos.

A camada de dados se referem naturalmente aos dados 

A camada de estéticos se referem a escala a qual mapearemos os dados 

A camada gemoétrica se refere a forma que os dados assumirão no gráfico.

Essas são as camadas obrigatórias que precisamos alimentar com informações para gerar o gráfico

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&amp;f=1&amp;nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 15%, 10%

# .blue[**ggplot2 - Gramática Gráfica em R**]

.center[.red[**Elementos Essenciais e Não Essenciais da Gramática Gráfica**]]

.pull-left[
&lt;br/&gt;
&lt;img src="07-Visualizacao-de-Dados-com-ggplot2_files/figure-html/ggplot2 elementos essenciais e não essenciais 1-1.png" width="85%" style="display: block; margin: auto;" /&gt;
]

.pull-right[
&lt;table class=" lightable-material-dark lightable-striped" style="font-family: Serif; width: auto !important; margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;position: sticky; top:0; background-color: purple;"&gt; Descrição &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Aparência do gráfico &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; O espaço em que os dados são plotados &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Gera múltiplos gráficos &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Representações que melhoram a compreensão &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Os elementos visuais utilizados para representar os dados &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; A escala em que estamos mapeando nossos dados &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Os dados que estão sendo plotados &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]

???
Essas são as camadas não obrigatórias.


---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&amp;f=1&amp;nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 15%, 10%

# .blue[**Camadas de Estatística**]
&lt;br/&gt;
&lt;BR/&gt;

- .red[Duas] categorias de funções estatísticas

  - Chamadas dentro de um .red[`geom_()`]
  
  - Chamada .red[independentemente]

--

- .red[`stats_()`]


???
Há duas formas de usar a camada estatística. A partir de uma camada geométrica, ou a partir de uma chamada independente.

De uma forma ou de outra, a chamada se dará a partir de uma função `stats_()`.

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&amp;f=1&amp;nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 15%, 10%

# .blue[**Ligação entre geom\\\_() &lt;-&gt; stat\_()**]

.pull-left[

```r
p &lt;- tadpoles_len_sp %&gt;% 
  filter(species %in% c("Hp", "Pa", "Sf")) %&gt;%
  drop_na() %&gt;% 
  ggplot(aes(x = body_len))

p +  geom_histogram()
```
]

.pull-right[
&lt;img src="07-Visualizacao-de-Dados-com-ggplot2_files/figure-html/unnamed-chunk-5-1.png" style="display: block; margin: auto;" /&gt;
]

???
Já utilizamos uma função `stat_()` antes quando construímos histogramas. A função `stat_bin()` está sendo chamada juntamente a camada geométrica `geom_histogram()` e fazendo a contagem dentro de cada "caixa".

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&amp;f=1&amp;nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 15%, 10%

# .blue[**Ligação entre geom\\\_() &lt;-&gt; stat\_()**]


```r
p + geom_histogram()
p + stat_bin()
```

.pull-left[
&lt;img src="07-Visualizacao-de-Dados-com-ggplot2_files/figure-html/unnamed-chunk-7-1.png" width="85%" style="display: block; margin: auto;" /&gt;
]

.pull-right[
&lt;img src="07-Visualizacao-de-Dados-com-ggplot2_files/figure-html/unnamed-chunk-8-1.png" width="85%" style="display: block; margin: auto;" /&gt;
]

???
O mesmo resultado é obtido usando `geom_histogram()` e `stat_bin()`.

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&amp;f=1&amp;nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 15%, 10%

# .blue[**Ligação entre geom\\\_() &lt;-&gt; stat\_()**]



```r
p +  geom_bar(stat = "bin")
```


&lt;img src="07-Visualizacao-de-Dados-com-ggplot2_files/figure-html/unnamed-chunk-10-1.png" width="45%" style="display: block; margin: auto;" /&gt;


???
Nas funções `geom_()`, a ligação entre as camadas geométricas e estatísticas se dá pelo argumento `stat = `. 

Note que é possível obter um histograma a partir da função `geom_bar(stat = "bin")`.


---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&amp;f=1&amp;nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 15%, 10%

# .blue[**Ligação entre geom\\\_() &lt;-&gt; stat\_()**]


```r
p &lt;- tadpoles_clean %&gt;% 
  filter(species %in% c("Hp", "Pa", "Sf")) %&gt;% 
  select(species, stream) %&gt;% 
  drop_na() %&gt;% 
  ggplot(aes(x = species, fill = stream))

p + geom_bar()
p + stat_count()
```

.pull-left[
&lt;img src="07-Visualizacao-de-Dados-com-ggplot2_files/figure-html/unnamed-chunk-12-1.png" width="60%" style="display: block; margin: auto;" /&gt;
]

.pull-right[
&lt;img src="07-Visualizacao-de-Dados-com-ggplot2_files/figure-html/unnamed-chunk-13-1.png" width="60%" style="display: block; margin: auto;" /&gt;
]

???
No caso da camada geométrica `geom_bar()` a camada estatística equivalente é `stat_count()`.

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&amp;f=1&amp;nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 15%, 10%

# .blue[**Ligação entre geom\\\_() &lt;-&gt; stat\_()**]

&lt;table class=" lightable-material-dark lightable-striped" style="font-family: Serif; width: auto !important; margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;position: sticky; top:0; background-color: purple;"&gt; stat_() &lt;/th&gt;
   &lt;th style="text-align:left;position: sticky; top:0; background-color: purple;"&gt; geom_() &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; stat_bin() &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; geom_histogram() &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; stat_count() &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; geom_bar() &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

???
Resumidamente, essa é a ligação entre as camadas geométricas e estatísticas em gráficos de barras.

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&amp;f=1&amp;nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 15%, 10%

# .blue[**geom\\\_smooth() &lt;-&gt; stat\_smooth()**]

.pull-left[

```r
p &lt;- tadpoles_clean %&gt;% 
  drop_na() %&gt;% 
  ggplot(aes(x = total_len, 
             y = body_len))

p +  geom_point() +
  geom_smooth() 
```

```
geom_smooth() using method = 'loess' 
and formula 'y ~ x' 
```
]


.pull-right[
&lt;img src="07-Visualizacao-de-Dados-com-ggplot2_files/figure-html/unnamed-chunk-16-1.png" style="display: block; margin: auto;" /&gt;
]

???
Uma camada geométrica/estatística bastante útil é geom_smooth()/stat_smooth(). 

Elas adicionam linhas de tendência de diferentes tipos.

A região sombreada de cinza ao redor de cada reta representa um intervalo de confiança de 95%.

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&amp;f=1&amp;nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 15%, 10%

# .blue[**geom\\\_smooth() &lt;-&gt; stat\_smooth()**]

.pull-left[

```r
p &lt;- tadpoles_clean %&gt;% 
  drop_na() %&gt;% 
  ggplot(aes(x = total_len, 
             y = body_len))

p +  geom_point() +
  geom_smooth(se = FALSE) 
```

```
geom_smooth() using method = 'loess' 
and formula 'y ~ x' 
```
]



.pull-right[
&lt;img src="07-Visualizacao-de-Dados-com-ggplot2_files/figure-html/unnamed-chunk-18-1.png" style="display: block; margin: auto;" /&gt;
]

???
É possível desabilitar o intervalo de confiança através do argumento `se = FALSE`.

O tipo da reta que será plotada é controlada pelo argumento `method = `.

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&amp;f=1&amp;nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 15%, 10%

# .blue[**geom\\\_smooth() &lt;-&gt; stat\_smooth()**]

.pull-left[

```r
p &lt;- tadpoles_clean %&gt;% 
  drop_na() %&gt;% 
  ggplot(aes(x = total_len, 
             y = body_len))

p +  geom_point() +
  geom_smooth(method = "loess", 
              se = FALSE) 
```

```
geom_smooth() using method = 'loess' 
and formula 'y ~ x' 
```

]

.pull-right[
&lt;img src="07-Visualizacao-de-Dados-com-ggplot2_files/figure-html/unnamed-chunk-20-1.png" style="display: block; margin: auto;" /&gt;
]

???
O método *default* é o "loess". 

LOESS é um método não paramétrico de regressão não linear.

O método funciona calculando uma média ponderada de y ao passar uma janela móvel ao longo do eixo x.

É uma ferramenta útil na etapa de exploração dos dados, pois facilita a visualização da forma da relação entre as variáveis.

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&amp;f=1&amp;nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 15%, 10%

# .blue[**geom\\\_smooth() &lt;-&gt; stat\_smooth()**]

.pull-left[

```r
p &lt;- tadpoles_clean %&gt;% 
  drop_na() %&gt;% 
  ggplot(aes(x = total_len, 
             y = body_len))

p +  geom_point() +
  geom_smooth(method = "loess", 
              se = FALSE, span = 0.1)
```

```
geom_smooth() using method = 'loess' 
and formula 'y ~ x' 
```
]

.pull-right[
&lt;img src="07-Visualizacao-de-Dados-com-ggplot2_files/figure-html/unnamed-chunk-22-1.png" style="display: block; margin: auto;" /&gt;
]

???
O grau de suavização da curva é controlado pelo argumento `span = ` o qual define o tamanho da janela.

Quanto menor o valor do argumento `span = ` menos linear será a reta.

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&amp;f=1&amp;nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 15%, 10%

# .blue[**geom\\\_smooth() &lt;-&gt; stat\_smooth()**]


```r
p &lt;- iris %&gt;%
  ggplot(aes(x = Sepal.Length, 
             y = Sepal.Width,
             color = Species))

p +  geom_point() +
  geom_smooth(method = "loess", 
              se = FALSE, span = 0.4)
```

.pull-left[
.center[.red[`span = 0.4`]]
&lt;img src="07-Visualizacao-de-Dados-com-ggplot2_files/figure-html/unnamed-chunk-24-1.png" width="55%" style="display: block; margin: auto;" /&gt;
]

.pull-right[
.center[.red[`span = 1`]]
&lt;img src="07-Visualizacao-de-Dados-com-ggplot2_files/figure-html/unnamed-chunk-25-1.png" width="55%" style="display: block; margin: auto;" /&gt;
]

???
Exemplo com outra base de dados para deixar claro o papel do argumento `span = `.

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&amp;f=1&amp;nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 15%, 10%

# .blue[**geom_smooth(method = "lm")**]

.pull-left[

```r
p &lt;- tadpoles_clean %&gt;%
  filter(species %in% c("Hp", "Pa", "Sf")) %&gt;% 
  drop_na() %&gt;% 
  ggplot(aes(x = total_len, 
             y = body_len))

p +  geom_point() +
  geom_smooth(method = "lm", 
              se = FALSE)
```
]

.pull-right[
&lt;img src="07-Visualizacao-de-Dados-com-ggplot2_files/figure-html/unnamed-chunk-27-1.png" style="display: block; margin: auto;" /&gt;
]

???
O argumento método também pode definir modelos parmétricos, como "lm", como no exemplo, ou "glm", "rlm" e "gam".

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&amp;f=1&amp;nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 15%, 10%

# .blue[**geom_smooth(method = "lm")**]

.pull-left[

```r
p &lt;- tadpoles_clean %&gt;%
  filter(species %in% c("Hp", "Pa", "Sf")) %&gt;% 
  drop_na() %&gt;% 
  ggplot(aes(x = total_len, 
             y = body_len))

p +  geom_point() +
  geom_smooth(method = "lm",
              fullrange = TRUE)
```
]

.pull-right[
&lt;img src="07-Visualizacao-de-Dados-com-ggplot2_files/figure-html/unnamed-chunk-29-1.png" style="display: block; margin: auto;" /&gt;
]

???
Por *default* os modelos são limitados pela variação de cada grupo.

Para métodos paramétricos é possível gerar previsões para além da varaição de cada grupo usando o argumento `fullrange = TRUE`.

Como esperado, o erro padrão aumenta aumenta conforme a reta se afasta dos dados.

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&amp;f=1&amp;nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 15%, 10%

# .blue[**Ligação entre geom\\\_() &lt;-&gt; stat\_()**]

&lt;table class=" lightable-material-dark lightable-striped" style="font-family: Serif; width: auto !important; margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;position: sticky; top:0; background-color: purple;"&gt; stat_() &lt;/th&gt;
   &lt;th style="text-align:left;position: sticky; top:0; background-color: purple;"&gt; geom_() &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; stat_bin() &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; geom_histogram() &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; stat_count() &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; geom_bar() &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; stat_smooth() &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; geom_smooth() &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

???
Em geral, não é necessário utilizar diretamente essas funções estatísticas. 

Elas trabalham nos bastidores da chamada de funções das camadas geométricas. 

Mas é importante conhecer a relação entre as camadas geométricas e suas respectivas camadas estatísticas. 

Isso facilitará a compreensão de mensagens de erro e o uso das páginas de ajuda se você precisar implementar algum ajuste na camada estatística. 

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&amp;f=1&amp;nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 15%, 10%

# .blue[**Gráficos com Estatísticas**]

.pull-left[

```r
p &lt;- tadpoles_clean %&gt;%
  filter(species %in% c("Hp", "Pa", "Sf")) %&gt;% 
  drop_na() %&gt;% 
  ggplot(aes(x = species, 
             y = body_len))

*p + geom_jitter(width = 0.25,
              seed = 136, 
              alpha = 0.3)
```
]

.pull-right[
&lt;img src="07-Visualizacao-de-Dados-com-ggplot2_files/figure-html/unnamed-chunk-32-1.png" style="display: block; margin: auto;" /&gt;
]

???
Outra forma de representar esses dados visualmente é calcular e apresentar a média e o desvio padrão, ou o intervalo de confiança de 95%.

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&amp;f=1&amp;nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 15%, 10%

# .blue[**Gráficos com Estatísticas - geom_pointrange()**]

.center[.red[**Calcular na "mão" **]]

```r
tadpoles_clean %&gt;%
  filter(species %in% c("Hp", "Pa", "Sf")) %&gt;% 
  drop_na() %&gt;% 
  group_by(species) %&gt;% 
  summarise(media = mean(body_len),
            `+sd` = media + sd(body_len),
            `-sd` = media - sd(body_len))
```

&lt;table class=" lightable-material-dark lightable-striped" style="font-family: Serif; width: auto !important; margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;position: sticky; top:0; background-color: purple;"&gt; species &lt;/th&gt;
   &lt;th style="text-align:right;position: sticky; top:0; background-color: purple;"&gt; media &lt;/th&gt;
   &lt;th style="text-align:right;position: sticky; top:0; background-color: purple;"&gt; +sd &lt;/th&gt;
   &lt;th style="text-align:right;position: sticky; top:0; background-color: purple;"&gt; -sd &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Hp &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 12.136595 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 16.312222 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7.960968 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Pa &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 11.847674 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 13.171133 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10.524216 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Sf &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 6.697807 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8.846346 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4.549267 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;


???
Podemos calcular as estatísticas na mão para então plotar no gráfico usando a camada geométrica `geom_pointrange()`.

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&amp;f=1&amp;nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 15%, 10%

# .blue[**Gráficos com Estatísticas - geom_pointrange()**]

.center[.red[**Calcular na "mão" **]]
.pull-left[

```r
tadpoles_clean %&gt;%
  filter(species %in% c("Hp", "Pa", "Sf")) %&gt;% 
  drop_na() %&gt;% 
  group_by(species) %&gt;% 
  summarise(media = mean(body_len),
            `+sd` = media + sd(body_len),
            `-sd` = media - sd(body_len)) %&gt;% 
  ggplot(aes(y = media, x = species)) +
  geom_pointrange(aes(ymin = `-sd`,
                      ymax = `+sd`))
```
]

.pull-right[
&lt;img src="07-Visualizacao-de-Dados-com-ggplot2_files/figure-html/unnamed-chunk-36-1.png" width="95%" /&gt;
]

???
Podemos calcular as estatísticas na "mão" para então plotar no gráfico usando a camada geométrica `geom_pointrange()`.

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&amp;f=1&amp;nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 15%, 10%

# .blue[**Gráficos com Estatísticas**]

.center[.red[**`stat_summary()`**]]

.pull-left[

```r
library(Hmisc)
smean.sdl(tadpoles_clean$body_len, 
          mult = 1, na.rm = TRUE)
```

```
##      Mean     Lower     Upper 
##  9.406365  5.570495 13.242236
```


```r
p &lt;- tadpoles_clean %&gt;%
  filter(species %in% c("Hp", "Pa", "Sf")) %&gt;% 
  drop_na() %&gt;% 
  ggplot(aes(x = species, 
             y = body_len))

p + stat_summary(fun.data = mean_sdl,
                 fun.args = list(mult = 1))
```

- Utiliza .red[`geom_pointrange()`] por *default*
]

.pull-right[
&lt;img src="07-Visualizacao-de-Dados-com-ggplot2_files/figure-html/unnamed-chunk-39-1.png" width="95%" /&gt;
]

???
Ou podemos utilizarcalcular as estatísticas desejadas dentro da função `stat_summary()`. Neste exemplo, usamos a função `mean_sdl()`do pacote `Hmisc` para gerar as estatísticas dentro da função `stat_summary()`. O argumento `mult = 1` é a opção para 1 desvio padrão.

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&amp;f=1&amp;nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 15%, 10%

# .blue[**Gráficos com Estatísticas**]

.center[.red[**`stat_summary()`**]]

.pull-left[

```r
p &lt;- tadpoles_clean %&gt;%
  filter(species %in% c("Hp", "Pa", "Sf")) %&gt;% 
  drop_na() %&gt;% 
  ggplot(aes(x = species, 
             y = body_len))

p + stat_summary(fun = mean,
                 geom = "point") +
  stat_summary(fun.data = mean_sdl,
                 fun.args = list(mult = 1),
               geom = "errorbar",
               width = 0.1)
```
]

.pull-right[
&lt;img src="07-Visualizacao-de-Dados-com-ggplot2_files/figure-html/unnamed-chunk-41-1.png" width="95%" /&gt;
]

???
Para obter barras de erro basta adicionar uma camada estatística nova, calcular a média e usar o argumento `geom = "point"`.

A segunda camada usar o argumento `geom = "errorbar"` e o argumento `width = ` para determminar a largura da barra.

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&amp;f=1&amp;nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 15%, 10%

# .blue[**Gráficos com Estatísticas**]

.center[.red[**`stat_summary()`**]]

.pull-left[

```r
p &lt;- tadpoles_clean %&gt;%
  filter(species %in% c("Hp", "Pa", "Sf")) %&gt;% 
  drop_na() %&gt;% 
  ggplot(aes(x = species, 
             y = body_len))

p + stat_summary(fun = mean,
                 geom = "point") +
  stat_summary(fun.data = mean_sdl,
                 fun.args = list(mult = 1),
               geom = "errorbar",
               width = 0.1)
```
]

.pull-right[
&lt;img src="07-Visualizacao-de-Dados-com-ggplot2_files/figure-html/unnamed-chunk-43-1.png" width="95%" /&gt;
]

???
Para obter intervalos de confiança de 95% calculados usando a distribuição-t.

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&amp;f=1&amp;nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 15%, 10%

# .blue[**Verificando Distribuições**]

&lt;img src="07-Visualizacao-de-Dados-com-ggplot2_files/figure-html/unnamed-chunk-44-1.png" width="50%" style="display: block; margin: auto;" /&gt;

???
O gráfico mostra um modelo de regressão linear ajustado aos dados de tamanho total e corporal de girinos.

Umas das premissas da regressão linear é a normalidade dos resíduos do modelo. 

Isto também implica na normalidade da variável dependente. 

Uma forma de acessar a normalidade de uma variável é a partir de inspeções gráficas.



---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&amp;f=1&amp;nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 15%, 10%

# .blue[**Verificando Distribuições**]

.center[.red[**`stat_function()`**]]

.pull-left[

```r
p &lt;- tadpoles_clean %&gt;%
  filter(species %in% c("Hp", "Pa", "Sf"), 
         total_len &lt; 70,
         body_len &lt; 25) %&gt;% 
  drop_na() %&gt;% 
  ggplot(aes(x = body_len))

p + geom_histogram(aes(y = ..density..)) +
  geom_rug() +
  stat_function(fun = dnorm, color = "red",
                args = list(mean = mean(tadpoles_clean$body_len[tadpoles_clean$body_len &lt; 25], na.rm = TRUE),
                            sd = sd(tadpoles_clean$body_len[tadpoles_clean$body_len &lt; 25], na.rm = TRUE)))
```
]

.pull-right[
&lt;img src="07-Visualizacao-de-Dados-com-ggplot2_files/figure-html/unnamed-chunk-46-1.png" width="95%" /&gt;
]

???
Usando `stat_function()` é possível especificar qualquer função e pruduzir uma distribuição de probabilidades teórica como uma linha. 

Aqui uma distribuição normal foi produzida utilizando `dnorm()` e seus argumentos, média e desvio padrão, foram adicionados como uma lista para centra-la com base na distribuição empírica dos dados.

Isso permite comparar quão semelhante a dsitrbuição dos dados empíricos é a uma distribuição normal que possui os mesmos parâmetros, ou seja, a mesma média e desvio padrão.

A camada `geom_rug()` serve para mostrar os dados reais que foram encaixotados pelo histograma.

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&amp;f=1&amp;nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 15%, 10%

# .blue[**Verificando Distribuições**]

.center[.red[**`stat_qq()` + `geom_qq_line()`**]]

.pull-left[

```r
p &lt;- tadpoles_clean %&gt;%
  filter(species %in% c("Hp", "Pa", "Sf"), 
         total_len &lt; 70,
         body_len &lt; 25) %&gt;% 
  drop_na() %&gt;% 
  ggplot(aes(sample = body_len))

p + stat_qq() +
  geom_qq_line(color = "red")
```
]

.pull-right[
&lt;img src="07-Visualizacao-de-Dados-com-ggplot2_files/figure-html/unnamed-chunk-48-1.png" width="95%" /&gt;
]

???
QQ-plots também são úteis para comparar os dados a uma distribuição.

QQ-plots plotam a amostra contra um distribuição teórica, como uma normal, e desenham uma linha que divide a área de plotagem ao meio. 

Quantos mais os dados se alinham a essa linha, mais próximos eles estão da distribuição teórica.

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&amp;f=1&amp;nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 15%, 10%

# .blue[**Camada de Facetas**]

&lt;br/&gt;
&lt;BR/&gt;

- Gerar .red[múltiplos] gráficos

- Divisão a partir dos .red[níveis] de uma .red[variável categórica]

- Mesmo .red[sistema de coordendas]

- Facilita a red.[comparação]

???
A camada de facetas gera múltiplos gráficos com base nos diferentes níveis de uma variável categórica.

A ideia é dividir um gráfico que apresenta um grande conjunto de dados em multiplos gráficos que apresentam subconjuntos dos dados originais e que apresentam o mesmo sistema de coordenadas, o que facilita a comparação.

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&amp;f=1&amp;nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 15%, 10%

# .blue[**Camada de Facetas**]

.center[.red[**Tamanho do Corpo x Tamanho Total x Espécies**]]

.pull-left[

```r
p &lt;- tadpoles_clean %&gt;%
  filter(species %in% c("Hp", "Pa", "Sf")) %&gt;% 
  drop_na() %&gt;% 
  ggplot(aes(x = total_len, 
             y = body_len,
             color = species))

p + geom_point()
```
]

.pull-right[
&lt;img src="07-Visualizacao-de-Dados-com-ggplot2_files/figure-html/unnamed-chunk-50-1.png" width="95%" /&gt;
]

???
Nesse gráfico temos informação sobre a relação entre a tamanho corporal e total de girinos de 3 espécies.

Podemos adicionar uma camada de faceta `facet_grid()` para visualizar a relação individualmente para cada espécie.

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&amp;f=1&amp;nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 15%, 10%

# .blue[**Camada de Facetas**]

.center[.red[**Tamanho do Corpo x Tamanho Total x Espécies**]]

.pull-left[

```r
p &lt;- tadpoles_clean %&gt;%
  filter(species %in% c("Hp", "Pa", "Sf")) %&gt;% 
  drop_na() %&gt;% 
  ggplot(aes(x = total_len, 
             y = body_len))

p + geom_point() +
  facet_grid(cols = vars(species))
```
]

.pull-right[
&lt;img src="07-Visualizacao-de-Dados-com-ggplot2_files/figure-html/unnamed-chunk-52-1.png" width="95%" /&gt;
]

???
A camada `facet_grid()` tem argumentos para dividir os plots em linhas, ou colunas de acordo com a variável que alimenta a função `var()`.

Aqui, o gráfico foi dividido em colunas usando o argumento `cols = `.

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&amp;f=1&amp;nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 15%, 10%

# .blue[**Camada de Facetas**]

.center[.red[**Tamanho do Corpo x Tamanho Total x Espécies**]]

.pull-left[

```r
p &lt;- tadpoles_clean %&gt;%
  filter(species %in% c("Hp", "Pa", "Sf")) %&gt;% 
  drop_na() %&gt;% 
  ggplot(aes(x = total_len, 
             y = body_len))

p + geom_point() +
  facet_grid(. ~ species)
```
]

.pull-right[
&lt;img src="07-Visualizacao-de-Dados-com-ggplot2_files/figure-html/unnamed-chunk-54-1.png" width="95%" /&gt;
]

???
O mesmo resultado pode ser obtido a partir da notação de fórmula.

Tudo a direita do til gera gráfcos em diferentes colunas.

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&amp;f=1&amp;nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 15%, 10%

# .blue[**Camada de Facetas**]

.center[.red[**Tamanho do Corpo x Tamanho Total x Espécies**]]

.pull-left[

```r
p &lt;- tadpoles_clean %&gt;%
  filter(species %in% c("Hp", "Pa", "Sf")) %&gt;% 
  drop_na() %&gt;% 
  ggplot(aes(x = total_len, 
             y = body_len))

p + geom_point() +
  facet_grid(rows = vars(species))
```
]

.pull-right[
&lt;img src="07-Visualizacao-de-Dados-com-ggplot2_files/figure-html/unnamed-chunk-56-1.png" width="95%" /&gt;
]

???
A camada `facet_grid()` tem argumentos para dividir os plots em linhas, ou colunas de acordo com a variável que alimenta a função `var()`.

Aqui, o gráfico foi dividido em colunas usando o argumento `rows = `.

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&amp;f=1&amp;nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 15%, 10%

# .blue[**Camada de Facetas**]

.center[.red[**Tamanho do Corpo x Tamanho Total x Espécies**]]

.pull-left[

```r
p &lt;- tadpoles_clean %&gt;%
  filter(species %in% c("Hp", "Pa", "Sf")) %&gt;% 
  drop_na() %&gt;% 
  ggplot(aes(x = total_len, 
             y = body_len))

p + geom_point() +
  facet_grid(species ~ .)
```
]

.pull-right[
&lt;img src="07-Visualizacao-de-Dados-com-ggplot2_files/figure-html/unnamed-chunk-58-1.png" width="95%" /&gt;
]

???
Tudo a esquerda do til gera gráfcos em diferentes linhas.

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&amp;f=1&amp;nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 15%, 10%

# .blue[**Camada de Facetas**]

.center[.red[**Tamanho do Corpo x Tamanho Total x Espécies x Estágio**]]

.pull-left[

```r
p &lt;- tadpoles_clean %&gt;%
  filter(species %in% c("Hp", "Pa", "Sf")) %&gt;% 
  drop_na() %&gt;% 
  ggplot(aes(x = total_len, 
             y = body_len))

p + geom_point() +
  facet_grid(rows = vars(stage),
             cols= vars(species))
```
]

.pull-right[
&lt;img src="07-Visualizacao-de-Dados-com-ggplot2_files/figure-html/unnamed-chunk-60-1.png" width="95%" /&gt;
]

???
Subdividindo os gráficos em linhas e colunas a partir da notação moderna.

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&amp;f=1&amp;nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 15%, 10%

# .blue[**Camada de Facetas**]

.center[.red[**Tamanho do Corpo x Tamanho Total x Espécies**]]

.pull-left[

```r
p &lt;- tadpoles_clean %&gt;%
  filter(species %in% c("Hp", "Pa", "Sf")) %&gt;% 
  drop_na() %&gt;% 
  ggplot(aes(x = total_len, 
             y = body_len))

p + geom_point() +
  facet_grid(stage ~ species)
```
]

.pull-right[
&lt;img src="07-Visualizacao-de-Dados-com-ggplot2_files/figure-html/unnamed-chunk-62-1.png" width="95%" /&gt;
]

???
Subdividindo os gráficos em linhas e colunas a partir da notação de fórmula.

Problemas típicos ao trabalhar com facetas são os títulos e a ordem dos rótulos. 

Vamos connhecer algumas formas de alterar os títulos e suas ordens.

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&amp;f=1&amp;nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 15%, 10%

# .blue[**Renomeando Facetas**]

.center[.red[**Tamanho do Corpo x Tamanho Total x Espécies**]]

.pull-left[

```r
p &lt;- tadpoles_clean %&gt;%
  filter(species %in% c("Hp", "Pa", "Sf")) %&gt;% 
  drop_na() %&gt;% 
  ggplot(aes(x = total_len, 
             y = body_len))

p + geom_point() +
  facet_grid(cols = vars(species), 
             labeller = label_value)
```
]

.pull-right[
&lt;img src="07-Visualizacao-de-Dados-com-ggplot2_files/figure-html/unnamed-chunk-64-1.png" width="95%" /&gt;
]

???
A função *default* da camada faceta que atribui os títulos a partir do argumento `labeller = label_value`.

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&amp;f=1&amp;nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 15%, 10%

# .blue[**Renomeando Facetas**]

.center[.red[**Tamanho do Corpo x Tamanho Total x Espécies**]]
.pull-left[

```r
p &lt;- tadpoles_clean %&gt;%
  filter(species %in% c("Hp", "Pa", "Sf")) %&gt;% 
  drop_na() %&gt;% 
  ggplot(aes(x = total_len, 
             y = body_len))

p + geom_point() +
  facet_grid(cols = vars(species), 
             labeller = label_both)
```
]

.pull-right[
&lt;img src="07-Visualizacao-de-Dados-com-ggplot2_files/figure-html/unnamed-chunk-66-1.png" width="95%" /&gt;
]

???
A função mais útil da camada faceta que atribui os títulos a partir do argumento `labeller = label_both` que atribui ao título o nome da variável e o nível.

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&amp;f=1&amp;nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 15%, 10%

# .blue[**Renomeando Facetas**]

.center[.red[**Renomeando os Dados Diretamente - fct_recode()**]]

.pull-left[

```r
tadpoles_clean$species &lt;- fct_recode(tadpoles_clean$species,
             `Hylodes pipilans` = "Hp")

p &lt;- tadpoles_clean %&gt;%
  rename(Species = species, Stage = stage) %&gt;% 
  filter(Species %in% c("Hylodes pipilans")) %&gt;% 
  drop_na() %&gt;% 
  ggplot(aes(x = total_len, 
             y = body_len))

p + geom_point() +
  facet_grid(cols = vars(Species, 
                         Stage))
```
]

.pull-right[
&lt;img src="07-Visualizacao-de-Dados-com-ggplot2_files/figure-html/unnamed-chunk-68-1.png" width="95%" /&gt;
]

???
É possível renomear os títulos das facetas diretamente nos dados utilizando a função `fct_recode()` do pacote `forcats`.

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&amp;f=1&amp;nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 15%, 10%

# .blue[**Reordenando Facetas**]

.center[.red[**Reordenando os Dados Diretamente - fct_recode()**]]




.pull-left[

```r
tadpoles_clean$species &lt;- fct_recode(tadpoles_clean$species,
             `Hylodes \npipilans` = "Hp",
             `Proceratophrys \nappendiculata` = "Pa",
             `Scinax \nflavoguttatus` = "Sf")

p &lt;- tadpoles_clean %&gt;%
  rename(Species = species, Stage = stage) %&gt;% 
  filter(Species %in% c("Hylodes \npipilans", 
                        "Proceratophrys \nappendiculata", 
                        "Scinax \nflavoguttatus")) %&gt;% 
  drop_na() %&gt;% 
  ggplot(aes(x = total_len, 
             y = body_len))

p + geom_point() +
  facet_grid(cols = vars(Species))
```
]

.pull-right[
&lt;img src="07-Visualizacao-de-Dados-com-ggplot2_files/figure-html/unnamed-chunk-71-1.png" width="95%" /&gt;
]

???
É possível renomear os títulos das facetas diretamente nos dados utilizando a função `fct_recode()` do pacote `forcats`.

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&amp;f=1&amp;nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 15%, 10%

# .blue[**Reordenando Facetas**]

.center[.red[**Reordenando os Dados Diretamente - fct_relevel()**]]

.pull-left[

```r
tadpoles_clean$species &lt;- fct_relevel(tadpoles_clean$species,
             "Scinax \nflavoguttatus",
             "Proceratophrys \nappendiculata",
             "Hylodes \npipilans")

p &lt;- tadpoles_clean %&gt;%
  rename(Species = species, Stage = stage) %&gt;% 
  filter(Species %in% c("Hylodes \npipilans", 
                        "Proceratophrys \nappendiculata", 
                        "Scinax \nflavoguttatus")) %&gt;% 
  drop_na() %&gt;% 
  ggplot(aes(x = total_len, 
             y = body_len))

p + geom_point() +
  facet_grid(cols = vars(Species))
```
]

.pull-right[
&lt;img src="07-Visualizacao-de-Dados-com-ggplot2_files/figure-html/unnamed-chunk-73-1.png" width="95%" /&gt;
]

???
É possível reordenar os títulos das facetas diretamente nos dados utilizando a função `fct_relevel()` do pacote `forcats`.

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&amp;f=1&amp;nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 15%, 10%

# .blue[**Camada de Facetas - Ajustando o Espaço de Plotagem**]

.center[.red[**Variáveis Contínuas**]]

.pull-left[

```r
p &lt;- tadpoles_clean %&gt;%
  rename(Species = species, Stage = stage) %&gt;% 
  filter(Species %in% c("Hylodes \npipilans", 
                        "Proceratophrys \nappendiculata", 
                        "Scinax \nflavoguttatus")) %&gt;% 
  drop_na() %&gt;% 
  ggplot(aes(x = total_len, 
             y = body_len))

p + geom_point() +
  facet_grid(cols = vars(Species),
             rows = vars(Stage))
```
]

.pull-right[
&lt;img src="07-Visualizacao-de-Dados-com-ggplot2_files/figure-html/unnamed-chunk-75-1.png" width="95%" /&gt;
]

???
Note que os dados de Sf variam menos em relação ao eixo x do que os dados de Hp, gerando muito espaço em branco na área de plotagem dos gráficos de Sf. 

É possível reduzir o espaço em branco permitindo que os eixos x variem em escalas diferentes.

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&amp;f=1&amp;nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 15%, 10%

# .blue[**Camada de Facetas - Ajustando o Espaço de Plotagem**]

.center[.red[**Variáveis Contínuas - `scales = `**]]

.pull-left[

```r
p &lt;- tadpoles_clean %&gt;%
  rename(Species = species, Stage = stage) %&gt;% 
  filter(Species %in% c("Hylodes \npipilans", 
                        "Proceratophrys \nappendiculata", 
                        "Scinax \nflavoguttatus")) %&gt;% 
  drop_na() %&gt;% 
  ggplot(aes(x = total_len, 
             y = body_len))

p + geom_point() +
  facet_grid(cols = vars(Species),
             rows = vars(Stage),
             scales = "free_x")
```
]

.pull-right[
&lt;img src="07-Visualizacao-de-Dados-com-ggplot2_files/figure-html/unnamed-chunk-77-1.png" width="95%" /&gt;
]

???
Isto é alcançado utilizando o argumento `scales = "free_x"`

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&amp;f=1&amp;nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 15%, 10%

# .blue[**Camada de Facetas - Ajustando o Espaço de Plotagem**]

.center[.red[**Variáveis Contínuas - `scales = `**]]

.pull-left[

```r
p &lt;- tadpoles_clean %&gt;%
  rename(Species = species, Stage = stage) %&gt;% 
  filter(Species %in% c("Hylodes \npipilans", 
                        "Proceratophrys \nappendiculata", 
                        "Scinax \nflavoguttatus")) %&gt;% 
  drop_na() %&gt;% 
  ggplot(aes(x = total_len, 
             y = body_len))

p + geom_point() +
  facet_grid(cols = vars(Species),
             rows = vars(Stage),
             scales = "free_y")
```
]

.pull-right[
&lt;img src="07-Visualizacao-de-Dados-com-ggplot2_files/figure-html/unnamed-chunk-79-1.png" width="95%" /&gt;
]

???
Também é possível alterar as escalas do eixo y utilizando o argumento `scales = "free_y"`.

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&amp;f=1&amp;nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 15%, 10%

# .blue[**Camada de Facetas - Ajustando o Espaço de Plotagem**]

.center[.red[**Variáveis Contínuas - `scales = `**]]

.pull-left[

```r
p &lt;- tadpoles_clean %&gt;%
  rename(Species = species, Stage = stage) %&gt;% 
  filter(Species %in% c("Hylodes \npipilans", 
                        "Proceratophrys \nappendiculata", 
                        "Scinax \nflavoguttatus")) %&gt;% 
  drop_na() %&gt;% 
  ggplot(aes(x = total_len, 
             y = body_len))

p + geom_point() +
  facet_grid(cols = vars(Species),
             rows = vars(Stage),
             scales = "free")
```
]

.pull-right[
&lt;img src="07-Visualizacao-de-Dados-com-ggplot2_files/figure-html/unnamed-chunk-81-1.png" width="95%" /&gt;
]

???
Também é possível alterar ambas as escalas ao mesmo tempo utilizando o argumento `scales = "free"`.

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&amp;f=1&amp;nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 15%, 10%

# .blue[**Camada de Facetas - Ajustando o Espaço de Plotagem**]

.center[.red[**Variáveis Categóricas**]]

.pull-left[

```r
p &lt;- tadpoles_clean %&gt;%
  rename(Species = species, Stage = stage) %&gt;% 
  filter(Species %in% c("Hylodes \npipilans", 
                        "Proceratophrys \nappendiculata", 
                        "Scinax \nflavoguttatus")) %&gt;% 
  drop_na() %&gt;% 
  ggplot(aes(x = body_len, 
             y = Species,
             color = Species))

p + geom_jitter(height = 0.1, 
                show.legend = FALSE) +
  facet_grid(rows = vars(Stage))
```
]

.pull-right[
&lt;img src="07-Visualizacao-de-Dados-com-ggplot2_files/figure-html/unnamed-chunk-83-1.png" width="95%" /&gt;
]

???
Note que Pa não está presente no estágio 42.

---

background-image: url("https://github.com/vntborgesjr/AnalisaR/blob/master/imagens/AnalisaR_teste1.png?raw=true"), url("https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.libraries.rutgers.edu%2Fsites%2Fdefault%2Ffiles%2Fstyles%2Fresize_to_300px_width%2Fpublic%2Fevents%2F2020%2F01%2Fggplot2_0.png%3Fitok%3DMe9kSRI-&amp;f=1&amp;nofb=1")
background-position: 0% 100%, 100% 0%
background-size: 15%, 10%

# .blue[**Camada de Facetas - Ajustando o Espaço de Plotagem**]

.center[.red[**Variáveis Categóricas**]]

.pull-left[

```r
p &lt;- tadpoles_clean %&gt;%
  rename(Species = species, Stage = stage) %&gt;% 
  filter(Species %in% c("Hylodes \npipilans", 
                        "Proceratophrys \nappendiculata", 
                        "Scinax \nflavoguttatus")) %&gt;% 
  drop_na() %&gt;% 
  ggplot(aes(x = body_len, 
             y = Species,
             color = Species))

p + geom_jitter(height = 0.1, 
                show.legend = FALSE) +
  facet_grid(rows = vars(Stage),
             scales = "free_y",
             space = "free_y")
```
]

.pull-right[
&lt;img src="07-Visualizacao-de-Dados-com-ggplot2_files/figure-html/unnamed-chunk-85-1.png" width="95%" /&gt;
]

???
Podemos controlar o espaço de plotagem do eixo y quando avaliamos variáveis categóricas utilizando o argumento `space = "free_y"`.
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"ratio": "16:10",
"slideNumberFormat": "",
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
